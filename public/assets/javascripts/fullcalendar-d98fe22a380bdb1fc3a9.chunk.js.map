{"version":3,"sources":["webpack:///./resources/assets/javascripts/lib/fullcalendar.js","webpack:///./resources/assets/javascripts/chunks/fullcalendar.js"],"names":["pad","what","length","char","padding","Array","join","substr","Date","prototype","getWeekNumber","d","UTC","this","getFullYear","getMonth","getDate","dayNum","getUTCDay","setUTCDate","getUTCDate","yearStart","getUTCFullYear","Math","ceil","Fullcalendar","node","fullcalendar_options","$","document","getElementById","Draggable","itemSelector","eventData","eventEl","title","dataset","eventTitle","duration","eventDuration","course_id","eventCourse","tooltip","eventTooltip","studip_api_urls","drop","eventDropUrl","studip_view_urls","edit","eventDetailsUrl","calendar","Calendar","render","event_data","fake_week_start","start","String","split","end","fake_start","setHours","setMinutes","setSeconds","fake_end","start_day_diff","getDay","end_day_diff","studip_weekday_begin","studip_weekday_end","getTime","additional_config","config","extend","data","isArray","eventSources","map","s","hasOwnProperty","createFromNode","info","event","durationEditable","view","viewSpec","options","editable","extendedProps","resize","post","url","async","begin","toRFC3339String","fail","revert","format","withWeekend","each","undefined","addClass","toggleClass","print_title","text","prependTo","window","scrollTo","html2canvas","then","canvas","imgData","toDataURL","pdf","jsPDF","orientation","addImage","save","remove","removeClass","date","timezone_standard","timezone_offset_min","getTimezoneOffset","offset_hrs","parseInt","abs","offset_min","current_date","current_month","current_year","current_hrs","getHours","current_mins","getMinutes","current_secs","getSeconds","startEditable","drop_resource_id","newResource","id","studip_range_id","move","allDay","resource_id","real_end","setTime","cycle_id","resourceIds","getResources","resource","done","context","addEvent","JSON","parse","plugins","interactionPlugin","dayGridPlugin","timeGridPlugin","resourceCommonPlugin","resourceTimeGridPlugin","resourceTimelinePlugin","schedulerLicenseKey","defaultView","header","left","minTime","maxTime","height","contentHeight","firstDay","weekNumberCalculation","locales","enLocale","deLocale","locale","timeFormat","nowIndicator","timeZone","studip_functions","resourceAreaWidth","select","selectionInfo","studip_urls","add","STUDIP","Dialog","fromURL","ressource_id","eventClick","eventClickInfo","extended_props","jsEvent","target","hasClass","URLHelper","getURL","metadate_id","actionCalled","show","eventResize","resize_event","defaultResizeEventHandler","source","refetch","eventDrop","el","cal_start","activeStart","moveDates","institutePlanDropEventHandler","drop_event","defaultDropEventHandler","eventRender","eventElement","iconColor","textColor","attr","find","html","css","width","wordBreak","append","icon","prepend","ASSETS_URL","verticalAlign","marginRight","eventSourceSuccess","content","i","convertSemesterEvents","defaultDate","loading","isLoading","jQuery","updateSize","datesRender","activeRange","props","dateProfile","setDate","sem_start","sem_end","sem_week","floor","toLocaleDateString","weekday","Resources","updateBookingPlanSemesterByView","columnHeaderHtml","columnHeaderFormat","resourceRender","renderInfo","action","innerText","margin","dropInfo","draggedEl","eventReceive","institutePlanExternalDropEventHandler","init"],"mappings":"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","file":"javascripts/fullcalendar-d98fe22a380bdb1fc3a9.chunk.js","sourcesContent":["/*jslint esversion: 6*/\n\n/**\n * This class contains Stud.IP specific code for the fullcalendar package.\n */\n\nimport { Calendar } from '@fullcalendar/core';\nimport deLocale from '@fullcalendar/core/locales/de';\nimport enLocale from '@fullcalendar/core/locales/en-gb';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport { Draggable } from '@fullcalendar/interaction';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport resourceCommonPlugin from '@fullcalendar/resource-common';\nimport resourceTimeGridPlugin from '@fullcalendar/resource-timegrid';\nimport resourceTimelinePlugin from '@fullcalendar/resource-timeline';\n\nimport jsPDF from 'jspdf-yworks';\nimport html2canvas from 'html2canvas';\n\nDate.prototype.getWeekNumber = function () {\n    var d = new Date(Date.UTC(this.getFullYear(), this.getMonth(), this.getDate()));\n    var dayNum = d.getUTCDay() || 7;\n    d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n    var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n    return Math.ceil((((d - yearStart) / 86400000) + 1)/7);\n};\n\nfunction pad(what, length = 2, char = '0') {\n    let padding = new Array(length + 1).join(char);\n    return `${padding}${what}`.substr(-length);\n}\n\nclass Fullcalendar\n{\n    /**\n     * The initialisation method. It loads the JS files for fullcalendar\n     * in case they are not loaded and sets up a fullcalendar instance\n     * for the nodes specified in the parameter node.\n     *\n     * @param DOMElement|string node The node which shall have a full calendar.\n     *     This must either be a DOMElement or a string\n     *     containing a CSS selector.\n     */\n    static init(node, fullcalendar_options = null)\n    {\n        // Convert css selector to actual dom element\n        node = $(node)[0];\n\n        if (!node) {\n            //We need a CSS selector or a node!\n            return;\n        }\n\n        if (document.getElementById('external-events')) {\n            new Draggable(document.getElementById('external-events'), {\n                itemSelector: '.fc-event',\n                eventData (eventEl) {\n                    return {\n                        title: eventEl.dataset.eventTitle,\n                        duration: eventEl.dataset.eventDuration,\n                        course_id: eventEl.dataset.eventCourse,\n                        tooltip: eventEl.dataset.eventTooltip,\n                        studip_api_urls: {drop: eventEl.dataset.eventDropUrl},\n                        studip_view_urls: {edit: eventEl.dataset.eventDetailsUrl}\n                    };\n                }\n            });\n        }\n\n        var calendar = new Calendar(node, fullcalendar_options);\n        node.calendar = calendar;\n        calendar.render();\n\n        return calendar;\n    }\n\n    /**\n     * Converts semester events to the default fullcalendar event format.\n     * The begin and end date are converted to fit into the current week.\n     */\n    static convertSemesterEvents(event_data, fake_week_start = Date())\n    {\n        if (!event_data) {\n            return {};\n        }\n\n        var start = String(event_data.start).split('T');\n        var end = String(event_data.end).split('T');\n\n        //start and end must be transformed to the current week.\n        //Therefore, we need the ISO weekdays for begin and end.\n        var fake_start = new Date(fake_week_start);\n        fake_start.setHours(12);\n        fake_start.setMinutes(0);\n        fake_start.setSeconds(0);\n        var fake_end = new Date(fake_week_start);\n        fake_end.setHours(12);\n        fake_end.setMinutes(0);\n        fake_end.setSeconds(0);\n\n        //Calculcate the week day of the current week for the event\n        //from the current day and convert sunday to ISO format\n        var start_day_diff = fake_start.getDay() || 7;\n        var end_day_diff = fake_end.getDay() || 7;\n\n        start_day_diff = start_day_diff - event_data.studip_weekday_begin;\n        end_day_diff = end_day_diff - event_data.studip_weekday_end;\n\n        fake_start = new Date(\n            fake_start.getTime() - start_day_diff * 24 * 60 * 60 * 1000\n        );\n        fake_end = new Date(\n            fake_end.getTime() - end_day_diff * 24 * 60 * 60 * 1000\n        );\n\n        //Output the modified begin and end date in the correct ISO format:\n        event_data.start =`${fake_start.getFullYear()}-${pad(fake_start.getMonth() + 1)}-${pad(fake_start.getDate())}T${start[1]}`;\n        event_data.end = `${fake_end.getFullYear()}-${pad(fake_end.getMonth() + 1)}-${pad(fake_end.getDate())}T${end[1]}`;\n\n        return event_data;\n    }\n\n\n    static createSemesterCalendarFromNode(node, additional_config = {})\n    {\n        if (!node) {\n            //Ain't no fullcalendar when the node's gone!\n            return;\n        }\n\n        var config = $.extend(\n            {},\n            $(node).data('config') || {},\n            additional_config\n        );\n\n        if (Array.isArray(config.eventSources)) {\n            config.eventSources = config.eventSources.map((s) => {\n                if (s.hasOwnProperty('url')) {\n                    return s;\n                }\n            });\n        }\n\n        return this.createFromNode(node, config);\n    }\n\n\n    static defaultResizeEventHandler(info)\n    {\n        if (!info.event.durationEditable || !info.view.viewSpec.options.editable) {\n            //Read-only events cannot be resized!\n            info.revert();\n            return;\n        }\n\n        if (info.event.extendedProps.studip_api_urls.resize) {\n            $.post({\n                url: info.event.extendedProps.studip_api_urls.resize,\n                async: false,\n                data: {\n                    begin: this.toRFC3339String(info.event.start),\n                    end: this.toRFC3339String(info.event.end)\n                }\n            }).fail(info.revert);\n        }\n    }\n\n    static downloadPDF(format = 'landscape', withWeekend = false)\n    {\n        $('*[data-fullcalendar=\"1\"]').each(function () {\n            if (this.calendar != undefined) {\n                $(this).addClass('print-view').toggleClass('without-weekend', !withWeekend);\n\n                var title = $(this).data('title');\n                let print_title = $('<h1>').text(title).prependTo(this);\n\n                window.scrollTo(0, 0);\n\n                html2canvas(this).then(canvas => {\n                    var imgData = canvas.toDataURL('image/jpeg');\n                    var pdf = new jsPDF({\n                        orientation: format === 'landscape' ? 'landscape' : 'portrait'\n                    });\n                    if (format === 'landscape') {\n                        pdf.addImage(imgData, 'JPEG', 20, 20, 250, 250, 'i1', 'NONE', 0);\n                    } else {\n                        pdf.addImage(imgData, 'JPEG', 25, 20, 160, 190, 'i1', 'NONE', 0);\n                    }\n                    pdf.save(title + '.pdf');\n                });\n\n                print_title.remove();\n                $(this).removeClass('print-view without-weekend');\n            }\n        });\n    }\n\n    static toRFC3339String(date)\n    {\n        var timezone_offset_min = date.getTimezoneOffset();\n        var offset_hrs = parseInt(Math.abs(timezone_offset_min / 60), 10);\n        var offset_min = Math.abs(timezone_offset_min%60);\n        var timezone_standard;\n\n        offset_hrs = pad(offset_hrs);\n        offset_min = pad(offset_min);\n\n        // Add an opposite sign to the offset\n        // If offset is 0, it means timezone is UTC\n        if (timezone_offset_min < 0) {\n            timezone_standard = `+${offset_hrs}:${offset_min}`;\n        } else if (timezone_offset_min > 0) {\n            timezone_standard = `-${offset_hrs}:${offset_min}`;\n        } else {\n            timezone_standard = '+00:00';\n        }\n\n        var current_date  = pad(date.getDate());\n        var current_month = pad(date.getMonth() + 1);\n        var current_year  = date.getFullYear();\n        var current_hrs   = pad(date.getHours());\n        var current_mins  = pad(date.getMinutes());\n        var current_secs  = pad(date.getSeconds());\n        var current_datetime;\n\n        // Current datetime\n        // String such as 2016-07-16T19:20:30\n        current_datetime = `${current_year}-${current_month}-${current_date}T${current_hrs}:${current_mins}:${current_secs}`;\n\n        return current_datetime + timezone_standard;\n    }\n\n    static defaultDropEventHandler(info)\n    {\n        // The logic from fullcalendar is inversed here:\n        // If the calendar isn't editable, the event isn't either.\n        if (!info.event.startEditable || !info.view.viewSpec.options.editable) {\n            //Read-only events cannot be dragged and dropped!\n            info.revert();\n            return;\n        }\n\n        var drop_resource_id = info.newResource ? info.newResource.id : info.event.extendedProps.studip_range_id;\n\n        if (info.event.extendedProps.studip_api_urls.move) {\n            if (info.event.allDay) {\n                $.post({\n                    async: false,\n                    url: info.event.extendedProps.studip_api_urls.move,\n                    data: {\n                        resource_id: drop_resource_id,\n                        begin: this.toRFC3339String(info.event.start.setHours(0,0,0)),\n                        end: this.toRFC3339String(info.event.start.setHours(23,59,59))\n                    }\n                }).fail(info.revert);\n            } else if (info.event.end === null) {\n                var real_end = new Date();\n                real_end.setTime(info.event.start.getTime());\n                real_end.setHours(info.event.start.getHours()+2);\n                $.post({\n                    async: false,\n                    url: info.event.extendedProps.studip_api_urls.move,\n                    data: {\n                        resource_id: drop_resource_id,\n                        begin: this.toRFC3339String(info.event.start),\n                        end: this.toRFC3339String(real_end)\n                    }\n                }).fail(info.revert);\n            } else {\n                $.post({\n                    async: false,\n                    url: info.event.extendedProps.studip_api_urls.move,\n                    data: {\n                        resource_id: drop_resource_id,\n                        begin: this.toRFC3339String(info.event.start),\n                        end: this.toRFC3339String(info.event.end)\n                    }\n                }).fail(info.revert);\n            }\n        }\n    }\n\n    static institutePlanDropEventHandler(info)\n    {\n        //The logic from fullcalendar is inversed here:\n        if (info.newResource) {\n            $.post({\n                async: false,\n                url: info.event.extendedProps.studip_api_urls.move,\n                data: {\n                    cycle_id: info.event.id,\n                    resource_id: info.newResource.id,\n                    begin: this.toRFC3339String(info.event.start),\n                    end: this.toRFC3339String(info.event.end)\n                }\n            }).fail(info.revert);\n        } else {\n            //If the calendar isn't editable, the event isn't either.\n            if (!info.event.startEditable || !info.view.viewSpec.options.editable) {\n                //Read-only events cannot be dragged and dropped!\n                info.revert();\n                return;\n            }\n\n            $.post({\n                async: false,\n                url: info.event.extendedProps.studip_api_urls.move,\n                data: {\n                    cycle_id: info.event.id,\n                    begin: this.toRFC3339String(info.event.start),\n                    end: this.toRFC3339String(info.event.end)\n                }\n            }).fail(info.revert);\n        }\n    }\n\n    static institutePlanExternalDropEventHandler(info)\n    {\n        var resourceIds = info.event.getResources().map(resource => resource.id);\n\n        $.post({\n            async: false,\n            url: info.event.extendedProps.studip_api_urls.drop,\n            data: {\n                course_id: info.event.extendedProps.course_id,\n                begin: this.toRFC3339String(info.event.start),\n                end: this.toRFC3339String(info.event.end),\n                resource_id: resourceIds[0]\n            }\n        }).done(data => {\n            if (data) {\n                info.view.context.calendar.addEvent(JSON.parse(data));\n                info.event.remove();\n            }\n        });\n    }\n\n    static createFromNode(node, additional_config = {})\n    {\n        if (!node) {\n            //No node? No fullcalendar!\n            return;\n        }\n\n        var config = $(node).data('config');\n\n        //Make sure the default values are set, if they are not found\n        //in the additional_config object:\n        config = $.extend({\n            plugins: [ interactionPlugin, dayGridPlugin, timeGridPlugin, resourceCommonPlugin, resourceTimeGridPlugin, resourceTimelinePlugin ],\n            schedulerLicenseKey: 'GPL-My-Project-Is-Open-Source',\n            defaultView: 'timeGridWeek',\n            header: {\n                left: 'dayGridMonth,timeGridWeek,timeGridDay'\n            },\n            minTime: '08:00:00',\n            maxTime: '20:00:00',\n            height: 'auto',\n            contentHeight: 'auto',\n            firstDay: 1,\n            weekNumberCalculation: 'ISO',\n            locales: [enLocale, deLocale ],\n            locale:  String.locale === 'de-DE' ? 'de' : 'en-gb',\n            timeFormat: 'H:mm',\n            nowIndicator: true,\n            timeZone: 'local',\n            studip_functions: [],\n            resourceAreaWidth: '20%',\n            select (selectionInfo) {\n                if (!selectionInfo.view.viewSpec.options.editable || !selectionInfo.view.viewSpec.options.studip_urls) {\n                    //The calendar isn't editable.\n                    return;\n                }\n                if (selectionInfo.view.viewSpec.options.studip_urls.add) {\n                    if (selectionInfo.resource) {\n                        STUDIP.Dialog.fromURL( selectionInfo.view.viewSpec.options.studip_urls.add, {\n                            data: {\n                                begin: selectionInfo.start.getTime()/1000,\n                                end: selectionInfo.end.getTime()/1000,\n                                ressource_id: selectionInfo.resource.id\n                            }\n                        });\n                    } else {\n                        STUDIP.Dialog.fromURL(selectionInfo.view.viewSpec.options.studip_urls.add, {\n                            data: {\n                                begin: selectionInfo.start.getTime()/1000,\n                                end: selectionInfo.end.getTime()/1000\n                            }\n                        });\n                    }\n                }\n            },\n            eventClick (eventClickInfo) {\n                var event = eventClickInfo.event;\n                var extended_props = event.extendedProps;\n\n                if ($(eventClickInfo.jsEvent.target).hasClass('event-colorpicker')) {\n                    STUDIP.Dialog.fromURL(\n                        STUDIP.URLHelper.getURL('dispatch.php/admin/courseplanning/pick_color/' + extended_props.metadate_id + '/' + config.actionCalled),\n                        {'size': '400x400'}\n                    );\n                    return false;\n                }\n\n                if (extended_props.studip_view_urls === undefined) {\n                    return;\n                }\n                if (!event.startEditable && extended_props.studip_view_urls.show) {\n                    STUDIP.Dialog.fromURL(\n                        STUDIP.URLHelper.getURL(extended_props.studip_view_urls.show)\n                    );\n                } else if (event.startEditable && extended_props.studip_view_urls.edit) {\n                    STUDIP.Dialog.fromURL(\n                        STUDIP.URLHelper.getURL(extended_props.studip_view_urls.edit)\n                    );\n                }\n                return false;\n            },\n            eventResize (info) {\n                // The logic from fullcalendar is inversed here:\n                // If the calendar isn't editable, the event isn't either.\n                if (info.view.viewSpec.options.studip_functions.resize_event) {\n                    info.view.viewSpec.options.studip_functions.resize_event(info);\n                } else {\n                    STUDIP.Fullcalendar.defaultResizeEventHandler(info);\n                }\n                info.event.source.refetch();\n            },\n            eventDrop (info) {\n                if ($(info.view.context.calendar.el).hasClass('institute-plan')) {\n                    var start = info.event.start;\n                    var cal_start = info.view.activeStart;\n                    if ((start.getHours() - cal_start.getHours()) % 2 === 1) {\n                        info.event.moveDates('-01:00');\n                    }\n                    STUDIP.Fullcalendar.institutePlanDropEventHandler(info);\n                } else {\n                    if (info.view.viewSpec.options.studip_functions.drop_event) {\n                        info.view.viewSpec.options.studip_functions.drop_event(info);\n                    } else {\n                        STUDIP.Fullcalendar.defaultDropEventHandler(info);\n                    }\n                    info.event.source.refetch();\n                }\n            },\n            eventRender (info) {\n                var event = info.event;\n                var eventElement = info.el;\n                var iconColor = event.textColor == '#000000' ? 'black' : 'white';\n\n                if ($(info.view.context.calendar.el).hasClass('institute-plan')) {\n                    $(eventElement).attr('title', event.extendedProps.tooltip);\n                    $(eventElement).find('.fc-title').html(\n                        $('<div>').css({\n                            width: 'calc(100% - 21px)',\n                            height: '100%',\n                            wordBreak: 'break-word'\n                        }).text(eventElement.text)\n                    );\n                    $(eventElement).find('.fc-title').append(\n                        $('<button class=\"event-colorpicker\">').addClass(iconColor)\n                    );\n                } else {\n                    $(eventElement).attr('title', event.title);\n                }\n\n                if (event.extendedProps.icon) {\n                    $(eventElement).find('.fc-title').prepend(\n                        $('<img>').attr('src', `${STUDIP.ASSETS_URL}images/icons/${iconColor}/${event.extendedProps.icon}.svg`)\n                            .css({\n                                verticalAlign: 'text-bottom',\n                                marginRight: '3px',\n                                width: 14,\n                                height: 14\n                            })\n                    );\n                }\n            },\n            eventSourceSuccess: function(content, xhr) {\n                if ($(node).hasClass('semester-plan')) {\n                    $(content).each(function(i, event_data){\n                        STUDIP.Fullcalendar.convertSemesterEvents(event_data, config.defaultDate);\n                    });\n                }\n                return content;\n            },\n            loading (isLoading) {\n                if (isLoading) {\n                    if (!$('#loading-spinner').length) {\n                        jQuery('#layout_content').append(\n                            $('<div id=\"loading-spinner\" style=\"position: absolute; top: calc(50% - 55px); left: calc(50% + 135px); z-index: 9001;\">').html(\n                                $('<img>').attr('src', STUDIP.ASSETS_URL + 'images/ajax-indicator-black.svg')\n                                    .css({\n                                        width: 64,\n                                        height: 64\n                                    })\n                            )\n                        );\n                    }\n                } else {\n                    $('#loading-spinner').remove();\n                    this.updateSize();\n                }\n            },\n            datesRender (info) {\n                var activeRange = info.view.props.dateProfile.activeRange;\n                var start = activeRange.start;\n                var end = activeRange.end;\n\n                if ($(info.el).hasClass('institute-plan')) {\n                    $('.fc-slats tr:odd .fc-widget-content:not(.fc-axis)').remove();\n                }\n\n                if ($('.booking-plan-header').length) {\n                    end.setDate(end.getDate()-1);\n                    var sem_start = $('.booking-plan-header').data('semester-begin');\n                    var sem_end = $('.booking-plan-header').data('semester-end');\n\n                    if (start.getTime() / 1000 < sem_start || start.getTime() / 1000 > sem_end) {\n                        sem_start = null;\n                        sem_end = null;\n                    } else {\n                        var sem_week = Math.floor((end.getTime() / 1000 - sem_start) / (7 * 24 * 60 * 60)) + 1;\n                        $('#booking-plan-header-semweek').text(sem_week);\n                    }\n\n                    $('#booking-plan-header-calweek').text(start.getWeekNumber());\n                    $('#booking-plan-header-calbegin').text(start.toLocaleDateString('de-DE', {weekday: 'short'}) + ' ' + start.toLocaleDateString('de-DE'));\n                    $('#booking-plan-header-calend').text(end.toLocaleDateString('de-DE', {weekday: 'short'}) + ' ' + end.toLocaleDateString('de-DE'));\n\n                    if (!sem_start || !sem_end) {\n                        STUDIP.Resources.updateBookingPlanSemesterByView(activeRange);\n                    }\n                }\n            },\n            columnHeaderHtml (date) {\n                if ($(\"*[data-fullcalendar='1']\").hasClass('institute-plan')) {\n                    return '<a href=\"' + STUDIP.URLHelper.getURL('dispatch.php/admin/courseplanning/weekday/' + date.getDay()) + '\">' + date.toLocaleDateString('de-DE', config.columnHeaderFormat) + '</a>';\n                } else {\n                    return date.toLocaleDateString('de-DE', config.columnHeaderFormat);\n                }\n            },\n            resourceRender (renderInfo) {\n                if ($(renderInfo.view.context.calendar.el).hasClass('room-group-booking-plan')) {\n                    var action = $(renderInfo.view.context.calendar.el).hasClass('semester-plan') ? 'semester' : 'booking';\n                    var url = STUDIP.URLHelper.getURL(`dispatch.php/resources/room_planning/${action}_plan/${renderInfo.resource.id}`);\n\n                    $(renderInfo.el).find('.fc-cell-text').html(\n                        $('<a>').attr('href', url).text(renderInfo.el.innerText).append(\n                            $('<img>').attr('src', STUDIP.ASSETS_URL + 'images/icons/blue/link-intern.svg')\n                                .addClass('text-bottom')\n                                .css({\n                                    width: 16,\n                                    height: 16,\n                                    margin: '0px 5px'\n                                })\n                        )\n                    );\n                } else if ($(\"*[data-fullcalendar='1']\").hasClass('institute-plan') && renderInfo.resource.id > 0) {\n                    var icon = '<img class=\"text-bottom icon-role-clickable icon-shape-edit\" width=\"16\" height=\"16\" src=\"' + STUDIP.URLHelper.getURL('assets/images/icons/blue/edit.svg') + '\" alt=\"edit\">';\n                    $(renderInfo.el).append(\n                        '<a href=\"'\n                        + STUDIP.URLHelper.getURL('dispatch.php/admin/courseplanning/rename_column/'\n                        + renderInfo.resource.id\n                        +'/'\n                        + renderInfo.view.activeStart.getDay())\n                        + '\" data-dialog=\"size=auto\"> '\n                        + icon\n                        + '</a>'\n                    );\n                }\n            },\n            drop (dropInfo) {\n                $(dropInfo.draggedEl).remove();\n            },\n            eventReceive (info) {\n                if ($(info.view.context.calendar.el).hasClass('institute-plan')) {\n                    STUDIP.Fullcalendar.institutePlanExternalDropEventHandler(info);\n                }\n            }\n        }, config);\n\n        config = $.extend({}, config, additional_config);\n\n        return this.init(node, config);\n    }\n}\n\nexport default Fullcalendar;\n","import '@fullcalendar/core/main.css';\nimport '@fullcalendar/daygrid/main.css';\nimport '@fullcalendar/timegrid/main.css';\nimport '@fullcalendar/timeline/main.css';\nimport '@fullcalendar/resource-timeline/main.css';\n\nimport \"../../stylesheets/fullcalendar.scss\";\n\nimport Fullcalendar from '../lib/fullcalendar.js';\n\nSTUDIP.Fullcalendar = Fullcalendar;\n"],"sourceRoot":""}