{"version":3,"sources":["webpack:///./node_modules/gridstack/dist/gridstack.js","webpack:///./node_modules/gridstack/dist/gridstack.jQueryUI.js"],"names":["$","_","scope","window","obsolete","f","oldName","newName","wrapper","console","warn","apply","this","arguments","prototype","obsoleteOpts","Utils","isIntercepted","a","b","x","width","y","height","sort","nodes","dir","chain","map","node","max","value","sortBy","n","createStylesheet","id","style","document","createElement","setAttribute","styleSheet","cssText","appendChild","createTextNode","getElementsByTagName","sheet","removeStylesheet","remove","insertCSSRule","selector","rules","index","insertRule","addRule","toBool","v","toLowerCase","Boolean","_collisionNodeCheck","nn","_didCollide","bn","newY","_isAddNodeIntercepted","parseHeight","val","heightUnit","isString","match","Error","parseFloat","unit","GridStackDragDropPlugin","grid","is_intercepted","create_stylesheet","remove_stylesheet","insert_css_rule","registeredPlugins","registerPlugin","pluginClass","push","resizable","el","opts","draggable","droppable","isDroppable","on","eventName","callback","idSeq","GridStackEngine","onchange","floatMode","items","float","_updateCounter","_float","_addedNodes","_removedNodes","batchUpdate","commit","_packNodes","_notify","getNodeDataByDOMEl","find","get","_fixCollisions","self","_sortNodes","hasLocked","locked","collisionNode","bind","moveNode","isAreaEmpty","each","i","_updating","_origY","_dirty","canBeMoved","take","_prepareNode","resizing","defaults","parseInt","autoPosition","noResize","noMove","args","Array","slice","call","deletedNodes","concat","getDirtyNodes","cleanNodes","filter","addNode","triggerAddEvent","maxWidth","Math","min","maxHeight","minWidth","minHeight","_id","floor","clone","removeNode","detachNode","without","canMoveNode","isNodeChangedPosition","clonedNode","extend","res","getGridHeight","canBePlacedWithRespectToHeight","noPack","lastTriedX","lastTriedY","lastTriedWidth","lastTriedHeight","reduce","memo","beginUpdate","endUpdate","GridStack","oneColumnMode","isAutoCellHeight","container","handle_class","handleClass","item_class","itemClass","placeholder_class","placeholderClass","placeholder_text","placeholderText","cell_height","cellHeight","vertical_margin","verticalMargin","min_width","static_grid","staticGrid","is_nested","isNested","always_show_resize_handle","alwaysShowResizeHandle","closest","length","attr","handle","auto","_class","random","toFixed","animate","autoHide","handles","scroll","appendTo","disableDrag","disableResize","rtl","removable","removeTimeout","verticalMarginUnit","cellHeightUnit","disableOneColumnMode","oneColumnModeClass","ddPlugin","first","dd","css","addClass","cellWidth","_setStaticClass","_initStyles","_updateStyles","elements","_this","children","_prepareElement","setAnimation","placeholder","hide","_updateContainerHeight","_updateHeightsOnResize","throttle","onResizeHandler","_isOneColumnMode","append","trigger","removeClass","resize","trashZone","accept","event","ui","data","_grid","_setupRemovingTimeout","_clearRemovingTimeout","acceptWidgets","draggingElement","onDrag","pos","getCellFromPixel","offset","_added","show","_beforeDragX","_beforeDragY","is","origNode","ceil","outerWidth","outerHeight","_temporary","unbind","detach","originalNode","_triggerRemoveEvent","removeAttr","enableSelection","removeData","_prepareElementsByNode","_triggerAddEvent","_triggerChangeEvent","forceTrigger","hasChanges","eventParams","_stylesId","_styles","_max","getHeight","prefix","nbRows","nbMargins","innerWidth","documentElement","clientWidth","body","_removeTimeout","setTimeout","_isAboutToRemove","clearTimeout","dragOrResize","round","position","left","top","type","size","_temporaryRemoved","onStartMoving","o","strictCellHeight","onEndMoving","forceNotify","nestedGrids","start","stop","drag","enable","addWidget","makeWidget","willItFit","removeWidget","removeAll","destroy","detachGrid","off","disable","movable","enableMove","doEnable","includeNewWidgets","enableResize","isNaN","_updateElement","move","update","noUpdate","heightData","useOffset","containerPos","relativeLeft","relativeTop","columnWidth","rowHeight","setStatic","staticValue","staticClassName","_updateNodeWidths","oldWidth","newWidth","undefined","setGridWidth","gridWidth","doNotPropagate","batch_update","_fix_collisions","is_area_empty","_sort_nodes","_pack_nodes","_prepare_node","clean_nodes","get_dirty_nodes","add_node","remove_node","can_move_node","move_node","get_grid_height","begin_update","end_update","can_be_placed_with_respect_to_height","_trigger_change_event","_init_styles","_update_styles","_update_container_height","_is_one_column_mode","_prepare_element","set_animation","add_widget","make_widget","will_it_fit","remove_widget","remove_all","min_height","_update_element","cell_width","get_cell_from_pixel","set_static","_set_static_class","GridStackUI","Engine","fn","gridstack","JQueryUIGridStackDragDropPlugin","Object","create","constructor","key","containment","parent"],"mappings":"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","file":"javascripts/vendors~widgetsystem-d13b406b7747dff413f5.chunk.js","sourcesContent":["/**\n * gridstack.js 0.3.0\n * http://troolee.github.io/gridstack.js/\n * (c) 2014-2016 Pavel Reznikov, Dylan Weiss\n * gridstack.js may be freely distributed under the MIT license.\n * @preserve\n*/\n(function(factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery', 'lodash'], factory);\n    } else if (typeof exports !== 'undefined') {\n        try { jQuery = require('jquery'); } catch (e) {}\n        try { _ = require('lodash'); } catch (e) {}\n        factory(jQuery, _);\n    } else {\n        factory(jQuery, _);\n    }\n})(function($, _) {\n\n    var scope = window;\n\n    var obsolete = function(f, oldName, newName) {\n        var wrapper = function() {\n            console.warn('gridstack.js: Function `' + oldName + '` is deprecated as of v0.2.5 and has been replaced ' +\n            'with `' + newName + '`. It will be **completely** removed in v1.0.');\n            return f.apply(this, arguments);\n        };\n        wrapper.prototype = f.prototype;\n\n        return wrapper;\n    };\n\n    var obsoleteOpts = function(oldName, newName) {\n        console.warn('gridstack.js: Option `' + oldName + '` is deprecated as of v0.2.5 and has been replaced with `' +\n            newName + '`. It will be **completely** removed in v1.0.');\n    };\n\n    var Utils = {\n        isIntercepted: function(a, b) {\n            return !(a.x + a.width <= b.x || b.x + b.width <= a.x || a.y + a.height <= b.y || b.y + b.height <= a.y);\n        },\n\n        sort: function(nodes, dir, width) {\n            width = width || _.chain(nodes).map(function(node) { return node.x + node.width; }).max().value();\n            dir = dir != -1 ? 1 : -1;\n            return _.sortBy(nodes, function(n) { return dir * (n.x + n.y * width); });\n        },\n\n        createStylesheet: function(id) {\n            var style = document.createElement('style');\n            style.setAttribute('type', 'text/css');\n            style.setAttribute('data-gs-style-id', id);\n            if (style.styleSheet) {\n                style.styleSheet.cssText = '';\n            } else {\n                style.appendChild(document.createTextNode(''));\n            }\n            document.getElementsByTagName('head')[0].appendChild(style);\n            return style.sheet;\n        },\n\n        removeStylesheet: function(id) {\n            $('STYLE[data-gs-style-id=' + id + ']').remove();\n        },\n\n        insertCSSRule: function(sheet, selector, rules, index) {\n            if (typeof sheet.insertRule === 'function') {\n                sheet.insertRule(selector + '{' + rules + '}', index);\n            } else if (typeof sheet.addRule === 'function') {\n                sheet.addRule(selector, rules, index);\n            }\n        },\n\n        toBool: function(v) {\n            if (typeof v == 'boolean') {\n                return v;\n            }\n            if (typeof v == 'string') {\n                v = v.toLowerCase();\n                return !(v === '' || v == 'no' || v == 'false' || v == '0');\n            }\n            return Boolean(v);\n        },\n\n        _collisionNodeCheck: function(n) {\n            return n != this.node && Utils.isIntercepted(n, this.nn);\n        },\n\n        _didCollide: function(bn) {\n            return Utils.isIntercepted({x: this.n.x, y: this.newY, width: this.n.width, height: this.n.height}, bn);\n        },\n\n        _isAddNodeIntercepted: function(n) {\n            return Utils.isIntercepted({x: this.x, y: this.y, width: this.node.width, height: this.node.height}, n);\n        },\n\n        parseHeight: function(val) {\n            var height = val;\n            var heightUnit = 'px';\n            if (height && _.isString(height)) {\n                var match = height.match(/^(-[0-9]+\\.[0-9]+|[0-9]*\\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw)?$/);\n                if (!match) {\n                    throw new Error('Invalid height');\n                }\n                heightUnit = match[2] || 'px';\n                height = parseFloat(match[1]);\n            }\n            return {height: height, unit: heightUnit};\n        }\n    };\n\n    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n    Utils.is_intercepted = obsolete(Utils.isIntercepted, 'is_intercepted', 'isIntercepted');\n\n    Utils.create_stylesheet = obsolete(Utils.createStylesheet, 'create_stylesheet', 'createStylesheet');\n\n    Utils.remove_stylesheet = obsolete(Utils.removeStylesheet, 'remove_stylesheet', 'removeStylesheet');\n\n    Utils.insert_css_rule = obsolete(Utils.insertCSSRule, 'insert_css_rule', 'insertCSSRule');\n    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n\n    /**\n    * @class GridStackDragDropPlugin\n    * Base class for drag'n'drop plugin.\n    */\n    function GridStackDragDropPlugin(grid) {\n        this.grid = grid;\n    }\n\n    GridStackDragDropPlugin.registeredPlugins = [];\n\n    GridStackDragDropPlugin.registerPlugin = function(pluginClass) {\n        GridStackDragDropPlugin.registeredPlugins.push(pluginClass);\n    };\n\n    GridStackDragDropPlugin.prototype.resizable = function(el, opts) {\n        return this;\n    };\n\n    GridStackDragDropPlugin.prototype.draggable = function(el, opts) {\n        return this;\n    };\n\n    GridStackDragDropPlugin.prototype.droppable = function(el, opts) {\n        return this;\n    };\n\n    GridStackDragDropPlugin.prototype.isDroppable = function(el) {\n        return false;\n    };\n\n    GridStackDragDropPlugin.prototype.on = function(el, eventName, callback) {\n        return this;\n    };\n\n\n    var idSeq = 0;\n\n    var GridStackEngine = function(width, onchange, floatMode, height, items) {\n        this.width = width;\n        this.float = floatMode || false;\n        this.height = height || 0;\n\n        this.nodes = items || [];\n        this.onchange = onchange || function() {};\n\n        this._updateCounter = 0;\n        this._float = this.float;\n\n        this._addedNodes = [];\n        this._removedNodes = [];\n    };\n\n    GridStackEngine.prototype.batchUpdate = function() {\n        this._updateCounter = 1;\n        this.float = true;\n    };\n\n    GridStackEngine.prototype.commit = function() {\n        if (this._updateCounter !== 0) {\n            this._updateCounter = 0;\n            this.float = this._float;\n            this._packNodes();\n            this._notify();\n        }\n    };\n\n    // For Meteor support: https://github.com/troolee/gridstack.js/pull/272\n    GridStackEngine.prototype.getNodeDataByDOMEl = function(el) {\n        return _.find(this.nodes, function(n) { return el.get(0) === n.el.get(0); });\n    };\n\n    GridStackEngine.prototype._fixCollisions = function(node) {\n        var self = this;\n        this._sortNodes(-1);\n\n        var nn = node;\n        var hasLocked = Boolean(_.find(this.nodes, function(n) { return n.locked; }));\n        if (!this.float && !hasLocked) {\n            nn = {x: 0, y: node.y, width: this.width, height: node.height};\n        }\n        while (true) {\n            var collisionNode = _.find(this.nodes, _.bind(Utils._collisionNodeCheck, {node: node, nn: nn}));\n            if (typeof collisionNode == 'undefined') {\n                return;\n            }\n            this.moveNode(collisionNode, collisionNode.x, node.y + node.height,\n                collisionNode.width, collisionNode.height, true);\n        }\n    };\n\n    GridStackEngine.prototype.isAreaEmpty = function(x, y, width, height) {\n        var nn = {x: x || 0, y: y || 0, width: width || 1, height: height || 1};\n        var collisionNode = _.find(this.nodes, _.bind(function(n) {\n            return Utils.isIntercepted(n, nn);\n        }, this));\n        return collisionNode === null || typeof collisionNode === 'undefined';\n    };\n\n    GridStackEngine.prototype._sortNodes = function(dir) {\n        this.nodes = Utils.sort(this.nodes, dir, this.width);\n    };\n\n    GridStackEngine.prototype._packNodes = function() {\n        this._sortNodes();\n\n        if (this.float) {\n            _.each(this.nodes, _.bind(function(n, i) {\n                if (n._updating || typeof n._origY == 'undefined' || n.y == n._origY) {\n                    return;\n                }\n\n                var newY = n.y;\n                while (newY >= n._origY) {\n                    var collisionNode = _.chain(this.nodes)\n                        .find(_.bind(Utils._didCollide, {n: n, newY: newY}))\n                        .value();\n\n                    if (!collisionNode) {\n                        n._dirty = true;\n                        n.y = newY;\n                    }\n                    --newY;\n                }\n            }, this));\n        } else {\n            _.each(this.nodes, _.bind(function(n, i) {\n                if (n.locked) {\n                    return;\n                }\n                while (n.y > 0) {\n                    var newY = n.y - 1;\n                    var canBeMoved = i === 0;\n\n                    if (i > 0) {\n                        var collisionNode = _.chain(this.nodes)\n                            .take(i)\n                            .find(_.bind(Utils._didCollide, {n: n, newY: newY}))\n                            .value();\n                        canBeMoved = typeof collisionNode == 'undefined';\n                    }\n\n                    if (!canBeMoved) {\n                        break;\n                    }\n                    n._dirty = n.y != newY;\n                    n.y = newY;\n                }\n            }, this));\n        }\n    };\n\n    GridStackEngine.prototype._prepareNode = function(node, resizing) {\n        node = _.defaults(node || {}, {width: 1, height: 1, x: 0, y: 0});\n\n        node.x = parseInt('' + node.x);\n        node.y = parseInt('' + node.y);\n        node.width = parseInt('' + node.width);\n        node.height = parseInt('' + node.height);\n        node.autoPosition = node.autoPosition || false;\n        node.noResize = node.noResize || false;\n        node.noMove = node.noMove || false;\n\n        if (node.width > this.width) {\n            node.width = this.width;\n        } else if (node.width < 1) {\n            node.width = 1;\n        }\n\n        if (node.height < 1) {\n            node.height = 1;\n        }\n\n        if (node.x < 0) {\n            node.x = 0;\n        }\n\n        if (node.x + node.width > this.width) {\n            if (resizing) {\n                node.width = this.width - node.x;\n            } else {\n                node.x = this.width - node.width;\n            }\n        }\n\n        if (node.y < 0) {\n            node.y = 0;\n        }\n\n        return node;\n    };\n\n    GridStackEngine.prototype._notify = function() {\n        var args = Array.prototype.slice.call(arguments, 0);\n        args[0] = typeof args[0] === 'undefined' ? [] : [args[0]];\n        args[1] = typeof args[1] === 'undefined' ? true : args[1];\n        if (this._updateCounter) {\n            return;\n        }\n        var deletedNodes = args[0].concat(this.getDirtyNodes());\n        this.onchange(deletedNodes, args[1]);\n    };\n\n    GridStackEngine.prototype.cleanNodes = function() {\n        if (this._updateCounter) {\n            return;\n        }\n        _.each(this.nodes, function(n) {n._dirty = false; });\n    };\n\n    GridStackEngine.prototype.getDirtyNodes = function() {\n        return _.filter(this.nodes, function(n) { return n._dirty; });\n    };\n\n    GridStackEngine.prototype.addNode = function(node, triggerAddEvent) {\n        node = this._prepareNode(node);\n\n        if (typeof node.maxWidth != 'undefined') { node.width = Math.min(node.width, node.maxWidth); }\n        if (typeof node.maxHeight != 'undefined') { node.height = Math.min(node.height, node.maxHeight); }\n        if (typeof node.minWidth != 'undefined') { node.width = Math.max(node.width, node.minWidth); }\n        if (typeof node.minHeight != 'undefined') { node.height = Math.max(node.height, node.minHeight); }\n\n        node._id = ++idSeq;\n        node._dirty = true;\n\n        if (node.autoPosition) {\n            this._sortNodes();\n\n            for (var i = 0;; ++i) {\n                var x = i % this.width;\n                var y = Math.floor(i / this.width);\n                if (x + node.width > this.width) {\n                    continue;\n                }\n                if (!_.find(this.nodes, _.bind(Utils._isAddNodeIntercepted, {x: x, y: y, node: node}))) {\n                    node.x = x;\n                    node.y = y;\n                    break;\n                }\n            }\n        }\n\n        this.nodes.push(node);\n        if (typeof triggerAddEvent != 'undefined' && triggerAddEvent) {\n            this._addedNodes.push(_.clone(node));\n        }\n\n        this._fixCollisions(node);\n        this._packNodes();\n        this._notify();\n        return node;\n    };\n\n    GridStackEngine.prototype.removeNode = function(node, detachNode) {\n        detachNode = typeof detachNode === 'undefined' ? true : detachNode;\n        this._removedNodes.push(_.clone(node));\n        node._id = null;\n        this.nodes = _.without(this.nodes, node);\n        this._packNodes();\n        this._notify(node, detachNode);\n    };\n\n    GridStackEngine.prototype.canMoveNode = function(node, x, y, width, height) {\n        if (!this.isNodeChangedPosition(node, x, y, width, height)) {\n            return false;\n        }\n        var hasLocked = Boolean(_.find(this.nodes, function(n) { return n.locked; }));\n\n        if (!this.height && !hasLocked) {\n            return true;\n        }\n\n        var clonedNode;\n        var clone = new GridStackEngine(\n            this.width,\n            null,\n            this.float,\n            0,\n            _.map(this.nodes, function(n) {\n                if (n == node) {\n                    clonedNode = $.extend({}, n);\n                    return clonedNode;\n                }\n                return $.extend({}, n);\n            }));\n\n        if (typeof clonedNode === 'undefined') {\n            return true;\n        }\n\n        clone.moveNode(clonedNode, x, y, width, height);\n\n        var res = true;\n\n        if (hasLocked) {\n            res &= !Boolean(_.find(clone.nodes, function(n) {\n                return n != clonedNode && Boolean(n.locked) && Boolean(n._dirty);\n            }));\n        }\n        if (this.height) {\n            res &= clone.getGridHeight() <= this.height;\n        }\n\n        return res;\n    };\n\n    GridStackEngine.prototype.canBePlacedWithRespectToHeight = function(node) {\n        if (!this.height) {\n            return true;\n        }\n\n        var clone = new GridStackEngine(\n            this.width,\n            null,\n            this.float,\n            0,\n            _.map(this.nodes, function(n) { return $.extend({}, n); }));\n        clone.addNode(node);\n        return clone.getGridHeight() <= this.height;\n    };\n\n    GridStackEngine.prototype.isNodeChangedPosition = function(node, x, y, width, height) {\n        if (typeof x != 'number') { x = node.x; }\n        if (typeof y != 'number') { y = node.y; }\n        if (typeof width != 'number') { width = node.width; }\n        if (typeof height != 'number') { height = node.height; }\n\n        if (typeof node.maxWidth != 'undefined') { width = Math.min(width, node.maxWidth); }\n        if (typeof node.maxHeight != 'undefined') { height = Math.min(height, node.maxHeight); }\n        if (typeof node.minWidth != 'undefined') { width = Math.max(width, node.minWidth); }\n        if (typeof node.minHeight != 'undefined') { height = Math.max(height, node.minHeight); }\n\n        if (node.x == x && node.y == y && node.width == width && node.height == height) {\n            return false;\n        }\n        return true;\n    };\n\n    GridStackEngine.prototype.moveNode = function(node, x, y, width, height, noPack) {\n        if (!this.isNodeChangedPosition(node, x, y, width, height)) {\n            return node;\n        }\n        if (typeof x != 'number') { x = node.x; }\n        if (typeof y != 'number') { y = node.y; }\n        if (typeof width != 'number') { width = node.width; }\n        if (typeof height != 'number') { height = node.height; }\n\n        if (typeof node.maxWidth != 'undefined') { width = Math.min(width, node.maxWidth); }\n        if (typeof node.maxHeight != 'undefined') { height = Math.min(height, node.maxHeight); }\n        if (typeof node.minWidth != 'undefined') { width = Math.max(width, node.minWidth); }\n        if (typeof node.minHeight != 'undefined') { height = Math.max(height, node.minHeight); }\n\n        if (node.x == x && node.y == y && node.width == width && node.height == height) {\n            return node;\n        }\n\n        var resizing = node.width != width;\n        node._dirty = true;\n\n        node.x = x;\n        node.y = y;\n        node.width = width;\n        node.height = height;\n\n        node.lastTriedX = x;\n        node.lastTriedY = y;\n        node.lastTriedWidth = width;\n        node.lastTriedHeight = height;\n\n        node = this._prepareNode(node, resizing);\n\n        this._fixCollisions(node);\n        if (!noPack) {\n            this._packNodes();\n            this._notify();\n        }\n        return node;\n    };\n\n    GridStackEngine.prototype.getGridHeight = function() {\n        return _.reduce(this.nodes, function(memo, n) { return Math.max(memo, n.y + n.height); }, 0);\n    };\n\n    GridStackEngine.prototype.beginUpdate = function(node) {\n        _.each(this.nodes, function(n) {\n            n._origY = n.y;\n        });\n        node._updating = true;\n    };\n\n    GridStackEngine.prototype.endUpdate = function() {\n        _.each(this.nodes, function(n) {\n            n._origY = n.y;\n        });\n        var n = _.find(this.nodes, function(n) { return n._updating; });\n        if (n) {\n            n._updating = false;\n        }\n    };\n\n    var GridStack = function(el, opts) {\n        var self = this;\n        var oneColumnMode, isAutoCellHeight;\n\n        opts = opts || {};\n\n        this.container = $(el);\n\n        // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n        if (typeof opts.handle_class !== 'undefined') {\n            opts.handleClass = opts.handle_class;\n            obsoleteOpts('handle_class', 'handleClass');\n        }\n        if (typeof opts.item_class !== 'undefined') {\n            opts.itemClass = opts.item_class;\n            obsoleteOpts('item_class', 'itemClass');\n        }\n        if (typeof opts.placeholder_class !== 'undefined') {\n            opts.placeholderClass = opts.placeholder_class;\n            obsoleteOpts('placeholder_class', 'placeholderClass');\n        }\n        if (typeof opts.placeholder_text !== 'undefined') {\n            opts.placeholderText = opts.placeholder_text;\n            obsoleteOpts('placeholder_text', 'placeholderText');\n        }\n        if (typeof opts.cell_height !== 'undefined') {\n            opts.cellHeight = opts.cell_height;\n            obsoleteOpts('cell_height', 'cellHeight');\n        }\n        if (typeof opts.vertical_margin !== 'undefined') {\n            opts.verticalMargin = opts.vertical_margin;\n            obsoleteOpts('vertical_margin', 'verticalMargin');\n        }\n        if (typeof opts.min_width !== 'undefined') {\n            opts.minWidth = opts.min_width;\n            obsoleteOpts('min_width', 'minWidth');\n        }\n        if (typeof opts.static_grid !== 'undefined') {\n            opts.staticGrid = opts.static_grid;\n            obsoleteOpts('static_grid', 'staticGrid');\n        }\n        if (typeof opts.is_nested !== 'undefined') {\n            opts.isNested = opts.is_nested;\n            obsoleteOpts('is_nested', 'isNested');\n        }\n        if (typeof opts.always_show_resize_handle !== 'undefined') {\n            opts.alwaysShowResizeHandle = opts.always_show_resize_handle;\n            obsoleteOpts('always_show_resize_handle', 'alwaysShowResizeHandle');\n        }\n        // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n\n        opts.itemClass = opts.itemClass || 'grid-stack-item';\n        var isNested = this.container.closest('.' + opts.itemClass).length > 0;\n\n        this.opts = _.defaults(opts || {}, {\n            width: parseInt(this.container.attr('data-gs-width')) || 12,\n            height: parseInt(this.container.attr('data-gs-height')) || 0,\n            itemClass: 'grid-stack-item',\n            placeholderClass: 'grid-stack-placeholder',\n            placeholderText: '',\n            handle: '.grid-stack-item-content',\n            handleClass: null,\n            cellHeight: 60,\n            verticalMargin: 20,\n            auto: true,\n            minWidth: 768,\n            float: false,\n            staticGrid: false,\n            _class: 'grid-stack-instance-' + (Math.random() * 10000).toFixed(0),\n            animate: Boolean(this.container.attr('data-gs-animate')) || false,\n            alwaysShowResizeHandle: opts.alwaysShowResizeHandle || false,\n            resizable: _.defaults(opts.resizable || {}, {\n                autoHide: !(opts.alwaysShowResizeHandle || false),\n                handles: 'se'\n            }),\n            draggable: _.defaults(opts.draggable || {}, {\n                handle: (opts.handleClass ? '.' + opts.handleClass : (opts.handle ? opts.handle : '')) ||\n                    '.grid-stack-item-content',\n                scroll: false,\n                appendTo: 'body'\n            }),\n            disableDrag: opts.disableDrag || false,\n            disableResize: opts.disableResize || false,\n            rtl: 'auto',\n            removable: false,\n            removeTimeout: 2000,\n            verticalMarginUnit: 'px',\n            cellHeightUnit: 'px',\n            disableOneColumnMode: opts.disableOneColumnMode || false,\n            oneColumnModeClass: opts.oneColumnModeClass || 'grid-stack-one-column-mode',\n            ddPlugin: null\n        });\n\n        if (this.opts.ddPlugin === false) {\n            this.opts.ddPlugin = GridStackDragDropPlugin;\n        } else if (this.opts.ddPlugin === null) {\n            this.opts.ddPlugin = _.first(GridStackDragDropPlugin.registeredPlugins) || GridStackDragDropPlugin;\n        }\n\n        this.dd = new this.opts.ddPlugin(this);\n\n        if (this.opts.rtl === 'auto') {\n            this.opts.rtl = this.container.css('direction') === 'rtl';\n        }\n\n        if (this.opts.rtl) {\n            this.container.addClass('grid-stack-rtl');\n        }\n\n        this.opts.isNested = isNested;\n\n        isAutoCellHeight = this.opts.cellHeight === 'auto';\n        if (isAutoCellHeight) {\n            self.cellHeight(self.cellWidth(), true);\n        } else {\n            this.cellHeight(this.opts.cellHeight, true);\n        }\n        this.verticalMargin(this.opts.verticalMargin, true);\n\n        this.container.addClass(this.opts._class);\n\n        this._setStaticClass();\n\n        if (isNested) {\n            this.container.addClass('grid-stack-nested');\n        }\n\n        this._initStyles();\n\n        this.grid = new GridStackEngine(this.opts.width, function(nodes, detachNode) {\n            detachNode = typeof detachNode === 'undefined' ? true : detachNode;\n            var maxHeight = 0;\n            _.each(nodes, function(n) {\n                if (detachNode && n._id === null) {\n                    if (n.el) {\n                        n.el.remove();\n                    }\n                } else {\n                    n.el\n                        .attr('data-gs-x', n.x)\n                        .attr('data-gs-y', n.y)\n                        .attr('data-gs-width', n.width)\n                        .attr('data-gs-height', n.height);\n                    maxHeight = Math.max(maxHeight, n.y + n.height);\n                }\n            });\n            self._updateStyles(maxHeight + 10);\n        }, this.opts.float, this.opts.height);\n\n        if (this.opts.auto) {\n            var elements = [];\n            var _this = this;\n            this.container.children('.' + this.opts.itemClass + ':not(.' + this.opts.placeholderClass + ')')\n                .each(function(index, el) {\n                el = $(el);\n                elements.push({\n                    el: el,\n                    i: parseInt(el.attr('data-gs-x')) + parseInt(el.attr('data-gs-y')) * _this.opts.width\n                });\n            });\n            _.chain(elements).sortBy(function(x) { return x.i; }).each(function(i) {\n                self._prepareElement(i.el);\n            }).value();\n        }\n\n        this.setAnimation(this.opts.animate);\n\n        this.placeholder = $(\n            '<div class=\"' + this.opts.placeholderClass + ' ' + this.opts.itemClass + '\">' +\n            '<div class=\"placeholder-content\">' + this.opts.placeholderText + '</div></div>').hide();\n\n        this._updateContainerHeight();\n\n        this._updateHeightsOnResize = _.throttle(function() {\n            self.cellHeight(self.cellWidth(), false);\n        }, 100);\n\n        this.onResizeHandler = function() {\n            if (isAutoCellHeight) {\n                self._updateHeightsOnResize();\n            }\n\n            if (self._isOneColumnMode() && !self.opts.disableOneColumnMode) {\n                if (oneColumnMode) {\n                    return;\n                }\n                self.container.addClass(self.opts.oneColumnModeClass);\n                oneColumnMode = true;\n\n                self.grid._sortNodes();\n                _.each(self.grid.nodes, function(node) {\n                    self.container.append(node.el);\n\n                    if (self.opts.staticGrid) {\n                        return;\n                    }\n                    self.dd.draggable(node.el, 'disable');\n                    self.dd.resizable(node.el, 'disable');\n\n                    node.el.trigger('resize');\n                });\n            } else {\n                if (!oneColumnMode) {\n                    return;\n                }\n\n                self.container.removeClass(self.opts.oneColumnModeClass);\n                oneColumnMode = false;\n\n                if (self.opts.staticGrid) {\n                    return;\n                }\n\n                _.each(self.grid.nodes, function(node) {\n                    if (!node.noMove && !self.opts.disableDrag) {\n                        self.dd.draggable(node.el, 'enable');\n                    }\n                    if (!node.noResize && !self.opts.disableResize) {\n                        self.dd.resizable(node.el, 'enable');\n                    }\n\n                    node.el.trigger('resize');\n                });\n            }\n        };\n\n        $(window).resize(this.onResizeHandler);\n        this.onResizeHandler();\n\n        if (!self.opts.staticGrid && typeof self.opts.removable === 'string') {\n            var trashZone = $(self.opts.removable);\n            if (!this.dd.isDroppable(trashZone)) {\n                this.dd.droppable(trashZone, {\n                    accept: '.' + self.opts.itemClass\n                });\n            }\n            this.dd\n                .on(trashZone, 'dropover', function(event, ui) {\n                    var el = $(ui.draggable);\n                    var node = el.data('_gridstack_node');\n                    if (node._grid !== self) {\n                        return;\n                    }\n                    self._setupRemovingTimeout(el);\n                })\n                .on(trashZone, 'dropout', function(event, ui) {\n                    var el = $(ui.draggable);\n                    var node = el.data('_gridstack_node');\n                    if (node._grid !== self) {\n                        return;\n                    }\n                    self._clearRemovingTimeout(el);\n                });\n        }\n\n        if (!self.opts.staticGrid && self.opts.acceptWidgets) {\n            var draggingElement = null;\n\n            var onDrag = function(event, ui) {\n                var el = draggingElement;\n                var node = el.data('_gridstack_node');\n                var pos = self.getCellFromPixel(ui.offset, true);\n                var x = Math.max(0, pos.x);\n                var y = Math.max(0, pos.y);\n                if (!node._added) {\n                    node._added = true;\n\n                    node.el = el;\n                    node.x = x;\n                    node.y = y;\n                    self.grid.cleanNodes();\n                    self.grid.beginUpdate(node);\n                    self.grid.addNode(node);\n\n                    self.container.append(self.placeholder);\n                    self.placeholder\n                        .attr('data-gs-x', node.x)\n                        .attr('data-gs-y', node.y)\n                        .attr('data-gs-width', node.width)\n                        .attr('data-gs-height', node.height)\n                        .show();\n                    node.el = self.placeholder;\n                    node._beforeDragX = node.x;\n                    node._beforeDragY = node.y;\n\n                    self._updateContainerHeight();\n                } else {\n                    if (!self.grid.canMoveNode(node, x, y)) {\n                        return;\n                    }\n                    self.grid.moveNode(node, x, y);\n                    self._updateContainerHeight();\n                }\n            };\n\n            this.dd\n                .droppable(self.container, {\n                    accept: function(el) {\n                        el = $(el);\n                        var node = el.data('_gridstack_node');\n                        if (node && node._grid === self) {\n                            return false;\n                        }\n                        return el.is(self.opts.acceptWidgets === true ? '.grid-stack-item' : self.opts.acceptWidgets);\n                    }\n                })\n                .on(self.container, 'dropover', function(event, ui) {\n                    var offset = self.container.offset();\n                    var el = $(ui.draggable);\n                    var cellWidth = self.cellWidth();\n                    var cellHeight = self.cellHeight();\n                    var origNode = el.data('_gridstack_node');\n\n                    var width = origNode ? origNode.width : (Math.ceil(el.outerWidth() / cellWidth));\n                    var height = origNode ? origNode.height : (Math.ceil(el.outerHeight() / cellHeight));\n\n                    draggingElement = el;\n\n                    var node = self.grid._prepareNode({width: width, height: height, _added: false, _temporary: true});\n                    el.data('_gridstack_node', node);\n                    el.data('_gridstack_node_orig', origNode);\n\n                    el.on('drag', onDrag);\n                })\n                .on(self.container, 'dropout', function(event, ui) {\n                    var el = $(ui.draggable);\n                    el.unbind('drag', onDrag);\n                    var node = el.data('_gridstack_node');\n                    node.el = null;\n                    self.grid.removeNode(node);\n                    self.placeholder.detach();\n                    self._updateContainerHeight();\n                    el.data('_gridstack_node', el.data('_gridstack_node_orig'));\n                })\n                .on(self.container, 'drop', function(event, ui) {\n                    self.placeholder.detach();\n\n                    var node = $(ui.draggable).data('_gridstack_node');\n                    node._grid = self;\n                    var el = $(ui.draggable).clone(false);\n                    el.data('_gridstack_node', node);\n                    var originalNode = $(ui.draggable).data('_gridstack_node_orig');\n                    if (typeof originalNode !== 'undefined') {\n                        originalNode._grid._triggerRemoveEvent();\n                    }\n                    $(ui.draggable).remove();\n                    node.el = el;\n                    self.placeholder.hide();\n                    el\n                        .attr('data-gs-x', node.x)\n                        .attr('data-gs-y', node.y)\n                        .attr('data-gs-width', node.width)\n                        .attr('data-gs-height', node.height)\n                        .addClass(self.opts.itemClass)\n                        .removeAttr('style')\n                        .enableSelection()\n                        .removeData('draggable')\n                        .removeClass('ui-draggable ui-draggable-dragging ui-draggable-disabled')\n                        .unbind('drag', onDrag);\n                    self.container.append(el);\n                    self._prepareElementsByNode(el, node);\n                    self._updateContainerHeight();\n                    self.grid._addedNodes.push(node);\n                    self._triggerAddEvent();\n                    self._triggerChangeEvent();\n\n                    self.grid.endUpdate();\n                });\n        }\n    };\n\n    GridStack.prototype._triggerChangeEvent = function(forceTrigger) {\n        var elements = this.grid.getDirtyNodes();\n        var hasChanges = false;\n\n        var eventParams = [];\n        if (elements && elements.length) {\n            eventParams.push(elements);\n            hasChanges = true;\n        }\n\n        if (hasChanges || forceTrigger === true) {\n            this.container.trigger('change', eventParams);\n        }\n    };\n\n    GridStack.prototype._triggerAddEvent = function() {\n        if (this.grid._addedNodes && this.grid._addedNodes.length > 0) {\n            this.container.trigger('added', [_.map(this.grid._addedNodes, _.clone)]);\n            this.grid._addedNodes = [];\n        }\n    };\n\n    GridStack.prototype._triggerRemoveEvent = function() {\n        if (this.grid._removedNodes && this.grid._removedNodes.length > 0) {\n            this.container.trigger('removed', [_.map(this.grid._removedNodes, _.clone)]);\n            this.grid._removedNodes = [];\n        }\n    };\n\n    GridStack.prototype._initStyles = function() {\n        if (this._stylesId) {\n            Utils.removeStylesheet(this._stylesId);\n        }\n        this._stylesId = 'gridstack-style-' + (Math.random() * 100000).toFixed();\n        this._styles = Utils.createStylesheet(this._stylesId);\n        if (this._styles !== null) {\n            this._styles._max = 0;\n        }\n    };\n\n    GridStack.prototype._updateStyles = function(maxHeight) {\n        if (this._styles === null || typeof this._styles === 'undefined') {\n            return;\n        }\n\n        var prefix = '.' + this.opts._class + ' .' + this.opts.itemClass;\n        var self = this;\n        var getHeight;\n\n        if (typeof maxHeight == 'undefined') {\n            maxHeight = this._styles._max;\n        }\n        this._initStyles();\n        this._updateContainerHeight();\n        if (!this.opts.cellHeight) { // The rest will be handled by CSS\n            return ;\n        }\n        if (this._styles._max !== 0 && maxHeight <= this._styles._max) {\n            return ;\n        }\n\n        if (!this.opts.verticalMargin || this.opts.cellHeightUnit === this.opts.verticalMarginUnit) {\n            getHeight = function(nbRows, nbMargins) {\n                return (self.opts.cellHeight * nbRows + self.opts.verticalMargin * nbMargins) +\n                    self.opts.cellHeightUnit;\n            };\n        } else {\n            getHeight = function(nbRows, nbMargins) {\n                if (!nbRows || !nbMargins) {\n                    return (self.opts.cellHeight * nbRows + self.opts.verticalMargin * nbMargins) +\n                        self.opts.cellHeightUnit;\n                }\n                return 'calc(' + ((self.opts.cellHeight * nbRows) + self.opts.cellHeightUnit) + ' + ' +\n                    ((self.opts.verticalMargin * nbMargins) + self.opts.verticalMarginUnit) + ')';\n            };\n        }\n\n        if (this._styles._max === 0) {\n            Utils.insertCSSRule(this._styles, prefix, 'min-height: ' + getHeight(1, 0) + ';', 0);\n        }\n\n        if (maxHeight > this._styles._max) {\n            for (var i = this._styles._max; i < maxHeight; ++i) {\n                Utils.insertCSSRule(this._styles,\n                    prefix + '[data-gs-height=\"' + (i + 1) + '\"]',\n                    'height: ' + getHeight(i + 1, i) + ';',\n                    i\n                );\n                Utils.insertCSSRule(this._styles,\n                    prefix + '[data-gs-min-height=\"' + (i + 1) + '\"]',\n                    'min-height: ' + getHeight(i + 1, i) + ';',\n                    i\n                );\n                Utils.insertCSSRule(this._styles,\n                    prefix + '[data-gs-max-height=\"' + (i + 1) + '\"]',\n                    'max-height: ' + getHeight(i + 1, i) + ';',\n                    i\n                );\n                Utils.insertCSSRule(this._styles,\n                    prefix + '[data-gs-y=\"' + i + '\"]',\n                    'top: ' + getHeight(i, i) + ';',\n                    i\n                );\n            }\n            this._styles._max = maxHeight;\n        }\n    };\n\n    GridStack.prototype._updateContainerHeight = function() {\n        if (this.grid._updateCounter) {\n            return;\n        }\n        var height = this.grid.getGridHeight();\n        this.container.attr('data-gs-current-height', height);\n        if (!this.opts.cellHeight) {\n            return ;\n        }\n        if (!this.opts.verticalMargin) {\n            this.container.css('height', (height * (this.opts.cellHeight)) + this.opts.cellHeightUnit);\n        } else if (this.opts.cellHeightUnit === this.opts.verticalMarginUnit) {\n            this.container.css('height', (height * (this.opts.cellHeight + this.opts.verticalMargin) -\n                this.opts.verticalMargin) + this.opts.cellHeightUnit);\n        } else {\n            this.container.css('height', 'calc(' + ((height * (this.opts.cellHeight)) + this.opts.cellHeightUnit) +\n                ' + ' + ((height * (this.opts.verticalMargin - 1)) + this.opts.verticalMarginUnit) + ')');\n        }\n    };\n\n    GridStack.prototype._isOneColumnMode = function() {\n        return (window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth) <=\n            this.opts.minWidth;\n    };\n\n    GridStack.prototype._setupRemovingTimeout = function(el) {\n        var self = this;\n        var node = $(el).data('_gridstack_node');\n\n        if (node._removeTimeout || !self.opts.removable) {\n            return;\n        }\n        node._removeTimeout = setTimeout(function() {\n            el.addClass('grid-stack-item-removing');\n            node._isAboutToRemove = true;\n        }, self.opts.removeTimeout);\n    };\n\n    GridStack.prototype._clearRemovingTimeout = function(el) {\n        var node = $(el).data('_gridstack_node');\n\n        if (!node._removeTimeout) {\n            return;\n        }\n        clearTimeout(node._removeTimeout);\n        node._removeTimeout = null;\n        el.removeClass('grid-stack-item-removing');\n        node._isAboutToRemove = false;\n    };\n\n    GridStack.prototype._prepareElementsByNode = function(el, node) {\n        var self = this;\n\n        var cellWidth;\n        var cellHeight;\n\n        var dragOrResize = function(event, ui) {\n            var x = Math.round(ui.position.left / cellWidth);\n            var y = Math.floor((ui.position.top + cellHeight / 2) / cellHeight);\n            var width;\n            var height;\n\n            if (event.type != 'drag') {\n                width = Math.round(ui.size.width / cellWidth);\n                height = Math.round(ui.size.height / cellHeight);\n            }\n\n            if (event.type == 'drag') {\n                if (x < 0 || x >= self.grid.width || y < 0 || (!self.grid.float && y > self.grid.getGridHeight())) {\n                    if (!node._temporaryRemoved) {\n                        if (self.opts.removable === true) {\n                            self._setupRemovingTimeout(el);\n                        }\n\n                        x = node._beforeDragX;\n                        y = node._beforeDragY;\n\n                        self.placeholder.detach();\n                        self.placeholder.hide();\n                        self.grid.removeNode(node);\n                        self._updateContainerHeight();\n\n                        node._temporaryRemoved = true;\n                    }\n                } else {\n                    self._clearRemovingTimeout(el);\n\n                    if (node._temporaryRemoved) {\n                        self.grid.addNode(node);\n                        self.placeholder\n                            .attr('data-gs-x', x)\n                            .attr('data-gs-y', y)\n                            .attr('data-gs-width', width)\n                            .attr('data-gs-height', height)\n                            .show();\n                        self.container.append(self.placeholder);\n                        node.el = self.placeholder;\n                        node._temporaryRemoved = false;\n                    }\n                }\n            } else if (event.type == 'resize')  {\n                if (x < 0) {\n                    return;\n                }\n            }\n            // width and height are undefined if not resizing\n            var lastTriedWidth = typeof width !== 'undefined' ? width : node.lastTriedWidth;\n            var lastTriedHeight = typeof height !== 'undefined' ? height : node.lastTriedHeight;\n            if (!self.grid.canMoveNode(node, x, y, width, height) ||\n                (node.lastTriedX === x && node.lastTriedY === y &&\n                node.lastTriedWidth === lastTriedWidth && node.lastTriedHeight === lastTriedHeight)) {\n                return;\n            }\n            node.lastTriedX = x;\n            node.lastTriedY = y;\n            node.lastTriedWidth = width;\n            node.lastTriedHeight = height;\n            self.grid.moveNode(node, x, y, width, height);\n            self._updateContainerHeight();\n        };\n\n        var onStartMoving = function(event, ui) {\n            self.container.append(self.placeholder);\n            var o = $(this);\n            self.grid.cleanNodes();\n            self.grid.beginUpdate(node);\n            cellWidth = self.cellWidth();\n            var strictCellHeight = Math.ceil(o.outerHeight() / o.attr('data-gs-height'));\n            cellHeight = self.container.height() / parseInt(self.container.attr('data-gs-current-height'));\n            self.placeholder\n                .attr('data-gs-x', o.attr('data-gs-x'))\n                .attr('data-gs-y', o.attr('data-gs-y'))\n                .attr('data-gs-width', o.attr('data-gs-width'))\n                .attr('data-gs-height', o.attr('data-gs-height'))\n                .show();\n            node.el = self.placeholder;\n            node._beforeDragX = node.x;\n            node._beforeDragY = node.y;\n\n            self.dd.resizable(el, 'option', 'minWidth', cellWidth * (node.minWidth || 1));\n            self.dd.resizable(el, 'option', 'minHeight', strictCellHeight * (node.minHeight || 1));\n\n            if (event.type == 'resizestart') {\n                o.find('.grid-stack-item').trigger('resizestart');\n            }\n        };\n\n        var onEndMoving = function(event, ui) {\n            var o = $(this);\n            if (!o.data('_gridstack_node')) {\n                return;\n            }\n\n            var forceNotify = false;\n            self.placeholder.detach();\n            node.el = o;\n            self.placeholder.hide();\n\n            if (node._isAboutToRemove) {\n                forceNotify = true;\n                var gridToNotify = el.data('_gridstack_node')._grid;\n                gridToNotify._triggerRemoveEvent();\n                el.removeData('_gridstack_node');\n                el.remove();\n            } else {\n                self._clearRemovingTimeout(el);\n                if (!node._temporaryRemoved) {\n                    o\n                        .attr('data-gs-x', node.x)\n                        .attr('data-gs-y', node.y)\n                        .attr('data-gs-width', node.width)\n                        .attr('data-gs-height', node.height)\n                        .removeAttr('style');\n                } else {\n                    o\n                        .attr('data-gs-x', node._beforeDragX)\n                        .attr('data-gs-y', node._beforeDragY)\n                        .attr('data-gs-width', node.width)\n                        .attr('data-gs-height', node.height)\n                        .removeAttr('style');\n                    node.x = node._beforeDragX;\n                    node.y = node._beforeDragY;\n                    self.grid.addNode(node);\n                }\n            }\n            self._updateContainerHeight();\n            self._triggerChangeEvent(forceNotify);\n\n            self.grid.endUpdate();\n\n            var nestedGrids = o.find('.grid-stack');\n            if (nestedGrids.length && event.type == 'resizestop') {\n                nestedGrids.each(function(index, el) {\n                    $(el).data('gridstack').onResizeHandler();\n                });\n                o.find('.grid-stack-item').trigger('resizestop');\n                o.find('.grid-stack-item').trigger('gsresizestop');\n            }\n            if (event.type == 'resizestop') {\n                self.container.trigger('gsresizestop', o);\n            }\n        };\n\n        this.dd\n            .draggable(el, {\n                start: onStartMoving,\n                stop: onEndMoving,\n                drag: dragOrResize\n            })\n            .resizable(el, {\n                start: onStartMoving,\n                stop: onEndMoving,\n                resize: dragOrResize\n            });\n\n        if (node.noMove || (this._isOneColumnMode() && !self.opts.disableOneColumnMode) || this.opts.disableDrag) {\n            this.dd.draggable(el, 'disable');\n        }\n\n        if (node.noResize || (this._isOneColumnMode() && !self.opts.disableOneColumnMode) || this.opts.disableResize) {\n            this.dd.resizable(el, 'disable');\n        }\n\n        el.attr('data-gs-locked', node.locked ? 'yes' : null);\n    };\n\n    GridStack.prototype._prepareElement = function(el, triggerAddEvent) {\n        triggerAddEvent = typeof triggerAddEvent != 'undefined' ? triggerAddEvent : false;\n        var self = this;\n        el = $(el);\n\n        el.addClass(this.opts.itemClass);\n        var node = self.grid.addNode({\n            x: el.attr('data-gs-x'),\n            y: el.attr('data-gs-y'),\n            width: el.attr('data-gs-width'),\n            height: el.attr('data-gs-height'),\n            maxWidth: el.attr('data-gs-max-width'),\n            minWidth: el.attr('data-gs-min-width'),\n            maxHeight: el.attr('data-gs-max-height'),\n            minHeight: el.attr('data-gs-min-height'),\n            autoPosition: Utils.toBool(el.attr('data-gs-auto-position')),\n            noResize: Utils.toBool(el.attr('data-gs-no-resize')),\n            noMove: Utils.toBool(el.attr('data-gs-no-move')),\n            locked: Utils.toBool(el.attr('data-gs-locked')),\n            el: el,\n            id: el.attr('data-gs-id'),\n            _grid: self\n        }, triggerAddEvent);\n        el.data('_gridstack_node', node);\n\n        this._prepareElementsByNode(el, node);\n    };\n\n    GridStack.prototype.setAnimation = function(enable) {\n        if (enable) {\n            this.container.addClass('grid-stack-animate');\n        } else {\n            this.container.removeClass('grid-stack-animate');\n        }\n    };\n\n    GridStack.prototype.addWidget = function(el, x, y, width, height, autoPosition, minWidth, maxWidth,\n        minHeight, maxHeight, id) {\n        el = $(el);\n        if (typeof x != 'undefined') { el.attr('data-gs-x', x); }\n        if (typeof y != 'undefined') { el.attr('data-gs-y', y); }\n        if (typeof width != 'undefined') { el.attr('data-gs-width', width); }\n        if (typeof height != 'undefined') { el.attr('data-gs-height', height); }\n        if (typeof autoPosition != 'undefined') { el.attr('data-gs-auto-position', autoPosition ? 'yes' : null); }\n        if (typeof minWidth != 'undefined') { el.attr('data-gs-min-width', minWidth); }\n        if (typeof maxWidth != 'undefined') { el.attr('data-gs-max-width', maxWidth); }\n        if (typeof minHeight != 'undefined') { el.attr('data-gs-min-height', minHeight); }\n        if (typeof maxHeight != 'undefined') { el.attr('data-gs-max-height', maxHeight); }\n        if (typeof id != 'undefined') { el.attr('data-gs-id', id); }\n        this.container.append(el);\n        this._prepareElement(el, true);\n        this._triggerAddEvent();\n        this._updateContainerHeight();\n        this._triggerChangeEvent(true);\n\n        return el;\n    };\n\n    GridStack.prototype.makeWidget = function(el) {\n        el = $(el);\n        this._prepareElement(el, true);\n        this._triggerAddEvent();\n        this._updateContainerHeight();\n        this._triggerChangeEvent(true);\n\n        return el;\n    };\n\n    GridStack.prototype.willItFit = function(x, y, width, height, autoPosition) {\n        var node = {x: x, y: y, width: width, height: height, autoPosition: autoPosition};\n        return this.grid.canBePlacedWithRespectToHeight(node);\n    };\n\n    GridStack.prototype.removeWidget = function(el, detachNode) {\n        detachNode = typeof detachNode === 'undefined' ? true : detachNode;\n        el = $(el);\n        var node = el.data('_gridstack_node');\n\n        // For Meteor support: https://github.com/troolee/gridstack.js/pull/272\n        if (!node) {\n            node = this.grid.getNodeDataByDOMEl(el);\n        }\n\n        this.grid.removeNode(node, detachNode);\n        el.removeData('_gridstack_node');\n        this._updateContainerHeight();\n        if (detachNode) {\n            el.remove();\n        }\n        this._triggerChangeEvent(true);\n        this._triggerRemoveEvent();\n    };\n\n    GridStack.prototype.removeAll = function(detachNode) {\n        _.each(this.grid.nodes, _.bind(function(node) {\n            this.removeWidget(node.el, detachNode);\n        }, this));\n        this.grid.nodes = [];\n        this._updateContainerHeight();\n    };\n\n    GridStack.prototype.destroy = function(detachGrid) {\n        $(window).off('resize', this.onResizeHandler);\n        this.disable();\n        if (typeof detachGrid != 'undefined' && !detachGrid) {\n            this.removeAll(false);\n            this.container.removeData('gridstack');\n        } else {\n            this.container.remove();\n        }\n        Utils.removeStylesheet(this._stylesId);\n        if (this.grid) {\n            this.grid = null;\n        }\n    };\n\n    GridStack.prototype.resizable = function(el, val) {\n        var self = this;\n        el = $(el);\n        el.each(function(index, el) {\n            el = $(el);\n            var node = el.data('_gridstack_node');\n            if (typeof node == 'undefined' || node === null) {\n                return;\n            }\n\n            node.noResize = !(val || false);\n            if (node.noResize || (self._isOneColumnMode() && !self.opts.disableOneColumnMode)) {\n                self.dd.resizable(el, 'disable');\n            } else {\n                self.dd.resizable(el, 'enable');\n            }\n        });\n        return this;\n    };\n\n    GridStack.prototype.movable = function(el, val) {\n        var self = this;\n        el = $(el);\n        el.each(function(index, el) {\n            el = $(el);\n            var node = el.data('_gridstack_node');\n            if (typeof node == 'undefined' || node === null) {\n                return;\n            }\n\n            node.noMove = !(val || false);\n            if (node.noMove || (self._isOneColumnMode() && !self.opts.disableOneColumnMode)) {\n                self.dd.draggable(el, 'disable');\n                el.removeClass('ui-draggable-handle');\n            } else {\n                self.dd.draggable(el, 'enable');\n                el.addClass('ui-draggable-handle');\n            }\n        });\n        return this;\n    };\n\n    GridStack.prototype.enableMove = function(doEnable, includeNewWidgets) {\n        this.movable(this.container.children('.' + this.opts.itemClass), doEnable);\n        if (includeNewWidgets) {\n            this.opts.disableDrag = !doEnable;\n        }\n    };\n\n    GridStack.prototype.enableResize = function(doEnable, includeNewWidgets) {\n        this.resizable(this.container.children('.' + this.opts.itemClass), doEnable);\n        if (includeNewWidgets) {\n            this.opts.disableResize = !doEnable;\n        }\n    };\n\n    GridStack.prototype.disable = function() {\n        this.movable(this.container.children('.' + this.opts.itemClass), false);\n        this.resizable(this.container.children('.' + this.opts.itemClass), false);\n        this.container.trigger('disable');\n    };\n\n    GridStack.prototype.enable = function() {\n        this.movable(this.container.children('.' + this.opts.itemClass), true);\n        this.resizable(this.container.children('.' + this.opts.itemClass), true);\n        this.container.trigger('enable');\n    };\n\n    GridStack.prototype.locked = function(el, val) {\n        el = $(el);\n        el.each(function(index, el) {\n            el = $(el);\n            var node = el.data('_gridstack_node');\n            if (typeof node == 'undefined' || node === null) {\n                return;\n            }\n\n            node.locked = (val || false);\n            el.attr('data-gs-locked', node.locked ? 'yes' : null);\n        });\n        return this;\n    };\n\n    GridStack.prototype.maxHeight = function(el, val) {\n        el = $(el);\n        el.each(function(index, el) {\n            el = $(el);\n            var node = el.data('_gridstack_node');\n            if (typeof node === 'undefined' || node === null) {\n                return;\n            }\n\n            if (!isNaN(val)) {\n                node.maxHeight = (val || false);\n                el.attr('data-gs-max-height', val);\n            }\n        });\n        return this;\n    };\n\n    GridStack.prototype.minHeight = function(el, val) {\n        el = $(el);\n        el.each(function(index, el) {\n            el = $(el);\n            var node = el.data('_gridstack_node');\n            if (typeof node === 'undefined' || node === null) {\n                return;\n            }\n\n            if (!isNaN(val)) {\n                node.minHeight = (val || false);\n                el.attr('data-gs-min-height', val);\n            }\n        });\n        return this;\n    };\n\n    GridStack.prototype.maxWidth = function(el, val) {\n        el = $(el);\n        el.each(function(index, el) {\n            el = $(el);\n            var node = el.data('_gridstack_node');\n            if (typeof node === 'undefined' || node === null) {\n                return;\n            }\n\n            if (!isNaN(val)) {\n                node.maxWidth = (val || false);\n                el.attr('data-gs-max-width', val);\n            }\n        });\n        return this;\n    };\n\n    GridStack.prototype.minWidth = function(el, val) {\n        el = $(el);\n        el.each(function(index, el) {\n            el = $(el);\n            var node = el.data('_gridstack_node');\n            if (typeof node === 'undefined' || node === null) {\n                return;\n            }\n\n            if (!isNaN(val)) {\n                node.minWidth = (val || false);\n                el.attr('data-gs-min-width', val);\n            }\n        });\n        return this;\n    };\n\n    GridStack.prototype._updateElement = function(el, callback) {\n        el = $(el).first();\n        var node = el.data('_gridstack_node');\n        if (typeof node == 'undefined' || node === null) {\n            return;\n        }\n\n        var self = this;\n\n        self.grid.cleanNodes();\n        self.grid.beginUpdate(node);\n\n        callback.call(this, el, node);\n\n        self._updateContainerHeight();\n        self._triggerChangeEvent();\n\n        self.grid.endUpdate();\n    };\n\n    GridStack.prototype.resize = function(el, width, height) {\n        this._updateElement(el, function(el, node) {\n            width = (width !== null && typeof width != 'undefined') ? width : node.width;\n            height = (height !== null && typeof height != 'undefined') ? height : node.height;\n\n            this.grid.moveNode(node, node.x, node.y, width, height);\n        });\n    };\n\n    GridStack.prototype.move = function(el, x, y) {\n        this._updateElement(el, function(el, node) {\n            x = (x !== null && typeof x != 'undefined') ? x : node.x;\n            y = (y !== null && typeof y != 'undefined') ? y : node.y;\n\n            this.grid.moveNode(node, x, y, node.width, node.height);\n        });\n    };\n\n    GridStack.prototype.update = function(el, x, y, width, height) {\n        this._updateElement(el, function(el, node) {\n            x = (x !== null && typeof x != 'undefined') ? x : node.x;\n            y = (y !== null && typeof y != 'undefined') ? y : node.y;\n            width = (width !== null && typeof width != 'undefined') ? width : node.width;\n            height = (height !== null && typeof height != 'undefined') ? height : node.height;\n\n            this.grid.moveNode(node, x, y, width, height);\n        });\n    };\n\n    GridStack.prototype.verticalMargin = function(val, noUpdate) {\n        if (typeof val == 'undefined') {\n            return this.opts.verticalMargin;\n        }\n\n        var heightData = Utils.parseHeight(val);\n\n        if (this.opts.verticalMarginUnit === heightData.unit && this.opts.height === heightData.height) {\n            return ;\n        }\n        this.opts.verticalMarginUnit = heightData.unit;\n        this.opts.verticalMargin = heightData.height;\n\n        if (!noUpdate) {\n            this._updateStyles();\n        }\n    };\n\n    GridStack.prototype.cellHeight = function(val, noUpdate) {\n        if (typeof val == 'undefined') {\n            if (this.opts.cellHeight) {\n                return this.opts.cellHeight;\n            }\n            var o = this.container.children('.' + this.opts.itemClass).first();\n            return Math.ceil(o.outerHeight() / o.attr('data-gs-height'));\n        }\n        var heightData = Utils.parseHeight(val);\n\n        if (this.opts.cellHeightUnit === heightData.heightUnit && this.opts.height === heightData.height) {\n            return ;\n        }\n        this.opts.cellHeightUnit = heightData.unit;\n        this.opts.cellHeight = heightData.height;\n\n        if (!noUpdate) {\n            this._updateStyles();\n        }\n\n    };\n\n    GridStack.prototype.cellWidth = function() {\n        return Math.round(this.container.outerWidth() / this.opts.width);\n    };\n\n    GridStack.prototype.getCellFromPixel = function(position, useOffset) {\n        var containerPos = (typeof useOffset != 'undefined' && useOffset) ?\n            this.container.offset() : this.container.position();\n        var relativeLeft = position.left - containerPos.left;\n        var relativeTop = position.top - containerPos.top;\n\n        var columnWidth = Math.floor(this.container.width() / this.opts.width);\n        var rowHeight = Math.floor(this.container.height() / parseInt(this.container.attr('data-gs-current-height')));\n\n        return {x: Math.floor(relativeLeft / columnWidth), y: Math.floor(relativeTop / rowHeight)};\n    };\n\n    GridStack.prototype.batchUpdate = function() {\n        this.grid.batchUpdate();\n    };\n\n    GridStack.prototype.commit = function() {\n        this.grid.commit();\n        this._updateContainerHeight();\n    };\n\n    GridStack.prototype.isAreaEmpty = function(x, y, width, height) {\n        return this.grid.isAreaEmpty(x, y, width, height);\n    };\n\n    GridStack.prototype.setStatic = function(staticValue) {\n        this.opts.staticGrid = (staticValue === true);\n        this.enableMove(!staticValue);\n        this.enableResize(!staticValue);\n        this._setStaticClass();\n    };\n\n    GridStack.prototype._setStaticClass = function() {\n        var staticClassName = 'grid-stack-static';\n\n        if (this.opts.staticGrid === true) {\n            this.container.addClass(staticClassName);\n        } else {\n            this.container.removeClass(staticClassName);\n        }\n    };\n\n    GridStack.prototype._updateNodeWidths = function(oldWidth, newWidth) {\n        this.grid._sortNodes();\n        this.grid.batchUpdate();\n        var node = {};\n        for (var i = 0; i < this.grid.nodes.length; i++) {\n            node = this.grid.nodes[i];\n            this.update(node.el, Math.round(node.x * newWidth / oldWidth), undefined,\n                Math.round(node.width * newWidth / oldWidth), undefined);\n        }\n        this.grid.commit();\n    };\n\n    GridStack.prototype.setGridWidth = function(gridWidth,doNotPropagate) {\n        this.container.removeClass('grid-stack-' + this.opts.width);\n        if (doNotPropagate !== true) {\n            this._updateNodeWidths(this.opts.width, gridWidth);\n        }\n        this.opts.width = gridWidth;\n        this.grid.width = gridWidth;\n        this.container.addClass('grid-stack-' + gridWidth);\n    };\n\n    // jscs:disable requireCamelCaseOrUpperCaseIdentifiers\n    GridStackEngine.prototype.batch_update = obsolete(GridStackEngine.prototype.batchUpdate);\n    GridStackEngine.prototype._fix_collisions = obsolete(GridStackEngine.prototype._fixCollisions,\n        '_fix_collisions', '_fixCollisions');\n    GridStackEngine.prototype.is_area_empty = obsolete(GridStackEngine.prototype.isAreaEmpty,\n        'is_area_empty', 'isAreaEmpty');\n    GridStackEngine.prototype._sort_nodes = obsolete(GridStackEngine.prototype._sortNodes,\n        '_sort_nodes', '_sortNodes');\n    GridStackEngine.prototype._pack_nodes = obsolete(GridStackEngine.prototype._packNodes,\n        '_pack_nodes', '_packNodes');\n    GridStackEngine.prototype._prepare_node = obsolete(GridStackEngine.prototype._prepareNode,\n        '_prepare_node', '_prepareNode');\n    GridStackEngine.prototype.clean_nodes = obsolete(GridStackEngine.prototype.cleanNodes,\n        'clean_nodes', 'cleanNodes');\n    GridStackEngine.prototype.get_dirty_nodes = obsolete(GridStackEngine.prototype.getDirtyNodes,\n        'get_dirty_nodes', 'getDirtyNodes');\n    GridStackEngine.prototype.add_node = obsolete(GridStackEngine.prototype.addNode,\n        'add_node', 'addNode, ');\n    GridStackEngine.prototype.remove_node = obsolete(GridStackEngine.prototype.removeNode,\n        'remove_node', 'removeNode');\n    GridStackEngine.prototype.can_move_node = obsolete(GridStackEngine.prototype.canMoveNode,\n        'can_move_node', 'canMoveNode');\n    GridStackEngine.prototype.move_node = obsolete(GridStackEngine.prototype.moveNode,\n        'move_node', 'moveNode');\n    GridStackEngine.prototype.get_grid_height = obsolete(GridStackEngine.prototype.getGridHeight,\n        'get_grid_height', 'getGridHeight');\n    GridStackEngine.prototype.begin_update = obsolete(GridStackEngine.prototype.beginUpdate,\n        'begin_update', 'beginUpdate');\n    GridStackEngine.prototype.end_update = obsolete(GridStackEngine.prototype.endUpdate,\n        'end_update', 'endUpdate');\n    GridStackEngine.prototype.can_be_placed_with_respect_to_height =\n        obsolete(GridStackEngine.prototype.canBePlacedWithRespectToHeight,\n        'can_be_placed_with_respect_to_height', 'canBePlacedWithRespectToHeight');\n    GridStack.prototype._trigger_change_event = obsolete(GridStack.prototype._triggerChangeEvent,\n        '_trigger_change_event', '_triggerChangeEvent');\n    GridStack.prototype._init_styles = obsolete(GridStack.prototype._initStyles,\n        '_init_styles', '_initStyles');\n    GridStack.prototype._update_styles = obsolete(GridStack.prototype._updateStyles,\n        '_update_styles', '_updateStyles');\n    GridStack.prototype._update_container_height = obsolete(GridStack.prototype._updateContainerHeight,\n        '_update_container_height', '_updateContainerHeight');\n    GridStack.prototype._is_one_column_mode = obsolete(GridStack.prototype._isOneColumnMode,\n        '_is_one_column_mode','_isOneColumnMode');\n    GridStack.prototype._prepare_element = obsolete(GridStack.prototype._prepareElement,\n        '_prepare_element', '_prepareElement');\n    GridStack.prototype.set_animation = obsolete(GridStack.prototype.setAnimation,\n        'set_animation', 'setAnimation');\n    GridStack.prototype.add_widget = obsolete(GridStack.prototype.addWidget,\n        'add_widget', 'addWidget');\n    GridStack.prototype.make_widget = obsolete(GridStack.prototype.makeWidget,\n        'make_widget', 'makeWidget');\n    GridStack.prototype.will_it_fit = obsolete(GridStack.prototype.willItFit,\n        'will_it_fit', 'willItFit');\n    GridStack.prototype.remove_widget = obsolete(GridStack.prototype.removeWidget,\n        'remove_widget', 'removeWidget');\n    GridStack.prototype.remove_all = obsolete(GridStack.prototype.removeAll,\n        'remove_all', 'removeAll');\n    GridStack.prototype.min_height = obsolete(GridStack.prototype.minHeight,\n        'min_height', 'minHeight');\n    GridStack.prototype.min_width = obsolete(GridStack.prototype.minWidth,\n        'min_width', 'minWidth');\n    GridStack.prototype._update_element = obsolete(GridStack.prototype._updateElement,\n        '_update_element', '_updateElement');\n    GridStack.prototype.cell_height = obsolete(GridStack.prototype.cellHeight,\n        'cell_height', 'cellHeight');\n    GridStack.prototype.cell_width = obsolete(GridStack.prototype.cellWidth,\n        'cell_width', 'cellWidth');\n    GridStack.prototype.get_cell_from_pixel = obsolete(GridStack.prototype.getCellFromPixel,\n        'get_cell_from_pixel', 'getCellFromPixel');\n    GridStack.prototype.batch_update = obsolete(GridStack.prototype.batchUpdate,\n        'batch_update', 'batchUpdate');\n    GridStack.prototype.is_area_empty = obsolete(GridStack.prototype.isAreaEmpty,\n        'is_area_empty', 'isAreaEmpty');\n    GridStack.prototype.set_static = obsolete(GridStack.prototype.setStatic,\n        'set_static', 'setStatic');\n    GridStack.prototype._set_static_class = obsolete(GridStack.prototype._setStaticClass,\n        '_set_static_class', '_setStaticClass');\n    // jscs:enable requireCamelCaseOrUpperCaseIdentifiers\n\n    scope.GridStackUI = GridStack;\n\n    scope.GridStackUI.Utils = Utils;\n    scope.GridStackUI.Engine = GridStackEngine;\n    scope.GridStackUI.GridStackDragDropPlugin = GridStackDragDropPlugin;\n\n    $.fn.gridstack = function(opts) {\n        return this.each(function() {\n            var o = $(this);\n            if (!o.data('gridstack')) {\n                o\n                    .data('gridstack', new GridStack(this, opts));\n            }\n        });\n    };\n\n    return scope.GridStackUI;\n});\n","/**\n * gridstack.js 0.3.0\n * http://troolee.github.io/gridstack.js/\n * (c) 2014-2016 Pavel Reznikov, Dylan Weiss\n * gridstack.js may be freely distributed under the MIT license.\n * @preserve\n*/\n(function(factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery', 'lodash', 'gridstack', 'jquery-ui/data', 'jquery-ui/disable-selection', 'jquery-ui/focusable',\n            'jquery-ui/form', 'jquery-ui/ie', 'jquery-ui/keycode', 'jquery-ui/labels', 'jquery-ui/jquery-1-7',\n            'jquery-ui/plugin', 'jquery-ui/safe-active-element', 'jquery-ui/safe-blur', 'jquery-ui/scroll-parent',\n            'jquery-ui/tabbable', 'jquery-ui/unique-id', 'jquery-ui/version', 'jquery-ui/widget',\n            'jquery-ui/widgets/mouse', 'jquery-ui/widgets/draggable', 'jquery-ui/widgets/droppable',\n            'jquery-ui/widgets/resizable'], factory);\n    } else if (typeof exports !== 'undefined') {\n        try { jQuery = require('jquery'); } catch (e) {}\n        try { _ = require('lodash'); } catch (e) {}\n        try { GridStackUI = require('gridstack'); } catch (e) {}\n        factory(jQuery, _, GridStackUI);\n    } else {\n        factory(jQuery, _, GridStackUI);\n    }\n})(function($, _, GridStackUI) {\n\n    var scope = window;\n\n    /**\n    * @class JQueryUIGridStackDragDropPlugin\n    * jQuery UI implementation of drag'n'drop gridstack plugin.\n    */\n    function JQueryUIGridStackDragDropPlugin(grid) {\n        GridStackUI.GridStackDragDropPlugin.call(this, grid);\n    }\n\n    GridStackUI.GridStackDragDropPlugin.registerPlugin(JQueryUIGridStackDragDropPlugin);\n\n    JQueryUIGridStackDragDropPlugin.prototype = Object.create(GridStackUI.GridStackDragDropPlugin.prototype);\n    JQueryUIGridStackDragDropPlugin.prototype.constructor = JQueryUIGridStackDragDropPlugin;\n\n    JQueryUIGridStackDragDropPlugin.prototype.resizable = function(el, opts) {\n        el = $(el);\n        if (opts === 'disable' || opts === 'enable') {\n            el.resizable(opts);\n        } else if (opts === 'option') {\n            var key = arguments[2];\n            var value = arguments[3];\n            el.resizable(opts, key, value);\n        } else {\n            el.resizable(_.extend({}, this.grid.opts.resizable, {\n                start: opts.start || function() {},\n                stop: opts.stop || function() {},\n                resize: opts.resize || function() {}\n            }));\n        }\n        return this;\n    };\n\n    JQueryUIGridStackDragDropPlugin.prototype.draggable = function(el, opts) {\n        el = $(el);\n        if (opts === 'disable' || opts === 'enable') {\n            el.draggable(opts);\n        } else {\n            el.draggable(_.extend({}, this.grid.opts.draggable, {\n                containment: this.grid.opts.isNested ? this.grid.container.parent() : null,\n                start: opts.start || function() {},\n                stop: opts.stop || function() {},\n                drag: opts.drag || function() {}\n            }));\n        }\n        return this;\n    };\n\n    JQueryUIGridStackDragDropPlugin.prototype.droppable = function(el, opts) {\n        el = $(el);\n        if (opts === 'disable' || opts === 'enable') {\n            el.droppable(opts);\n        } else {\n            el.droppable({\n                accept: opts.accept\n            });\n        }\n        return this;\n    };\n\n    JQueryUIGridStackDragDropPlugin.prototype.isDroppable = function(el, opts) {\n        el = $(el);\n        return Boolean(el.data('droppable'));\n    };\n\n    JQueryUIGridStackDragDropPlugin.prototype.on = function(el, eventName, callback) {\n        $(el).on(eventName, callback);\n        return this;\n    };\n\n    return JQueryUIGridStackDragDropPlugin;\n});\n"],"sourceRoot":""}