{"version":3,"sources":["webpack:///./resources/assets/javascripts/lib/fullcalendar.js","webpack:///./resources/assets/javascripts/chunks/fullcalendar.js"],"names":["pad","what","length","char","padding","Array","join","substr","Date","prototype","getWeekNumber","d","UTC","this","getFullYear","getMonth","getDate","dayNum","getUTCDay","setUTCDate","getUTCDate","yearStart","getUTCFullYear","Math","ceil","Fullcalendar","node","fullcalendar_options","$","document","getElementById","Draggable","itemSelector","eventData","eventEl","title","dataset","eventTitle","duration","eventDuration","course_id","eventCourse","tooltip","eventTooltip","studip_api_urls","drop","eventDropUrl","studip_view_urls","edit","eventDetailsUrl","calendar","Calendar","render","event_data","start","String","split","end","fake_start","setHours","setMinutes","setSeconds","fake_end","start_day_diff","getDay","end_day_diff","studip_weekday_begin","studip_weekday_end","getTime","additional_config","config","extend","data","isArray","eventSources","map","s","hasOwnProperty","eventDataTransform","STUDIP","convertSemesterEvents","createFromNode","info","event","durationEditable","view","viewSpec","options","editable","extendedProps","resize","post","url","async","begin","toRFC3339String","fail","revert","format","withWeekend","each","undefined","addClass","toggleClass","print_title","text","prependTo","window","scrollTo","html2canvas","then","canvas","imgData","toDataURL","pdf","jsPDF","orientation","addImage","save","remove","removeClass","date","timezone_standard","timezone_offset_min","getTimezoneOffset","offset_hrs","parseInt","abs","offset_min","current_date","current_month","current_year","current_hrs","getHours","current_mins","getMinutes","current_secs","getSeconds","startEditable","drop_resource_id","newResource","id","studip_range_id","move","allDay","resource_id","real_end","setTime","cycle_id","resourceIds","getResources","resource","done","context","addEvent","JSON","parse","plugins","interactionPlugin","dayGridPlugin","timeGridPlugin","resourceCommonPlugin","resourceTimeGridPlugin","resourceTimelinePlugin","schedulerLicenseKey","defaultView","header","left","minTime","maxTime","height","contentHeight","firstDay","weekNumberCalculation","locales","enLocale","deLocale","locale","timeFormat","nowIndicator","timeZone","studip_functions","resourceAreaWidth","select","selectionInfo","studip_urls","add","Dialog","fromURL","ressource_id","eventClick","eventClickInfo","extended_props","jsEvent","target","hasClass","URLHelper","getURL","metadate_id","actionCalled","show","eventResize","resize_event","defaultResizeEventHandler","source","refetch","eventDrop","el","cal_start","activeStart","moveDates","institutePlanDropEventHandler","drop_event","defaultDropEventHandler","eventRender","eventElement","iconColor","textColor","attr","find","html","css","width","wordBreak","append","icon","prepend","ASSETS_URL","verticalAlign","marginRight","loading","isLoading","jQuery","updateSize","datesRender","activeRange","props","dateProfile","setDate","sem_start","sem_end","sem_week","floor","toLocaleDateString","weekday","Resources","updateBookingPlanSemesterByView","columnHeaderHtml","columnHeaderFormat","resourceRender","renderInfo","action","innerText","margin","dropInfo","draggedEl","eventReceive","institutePlanExternalDropEventHandler","init"],"mappings":"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","file":"javascripts/fullcalendar-8013763046ef916f047b.chunk.js","sourcesContent":["/*jslint esversion: 6*/\n\n/**\n * This class contains Stud.IP specific code for the fullcalendar package.\n */\n\nimport { Calendar } from '@fullcalendar/core';\nimport deLocale from '@fullcalendar/core/locales/de';\nimport enLocale from '@fullcalendar/core/locales/en-gb';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport { Draggable } from '@fullcalendar/interaction';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport resourceCommonPlugin from '@fullcalendar/resource-common';\nimport resourceTimeGridPlugin from '@fullcalendar/resource-timegrid';\nimport resourceTimelinePlugin from '@fullcalendar/resource-timeline';\n\nimport jsPDF from 'jspdf-yworks';\nimport html2canvas from 'html2canvas';\n\nDate.prototype.getWeekNumber = function () {\n    var d = new Date(Date.UTC(this.getFullYear(), this.getMonth(), this.getDate()));\n    var dayNum = d.getUTCDay() || 7;\n    d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n    var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));\n    return Math.ceil((((d - yearStart) / 86400000) + 1)/7);\n};\n\nfunction pad(what, length = 2, char = '0') {\n    let padding = new Array(length + 1).join(char);\n    return `${padding}${what}`.substr(-length);\n}\n\nclass Fullcalendar\n{\n    /**\n     * The initialisation method. It loads the JS files for fullcalendar\n     * in case they are not loaded and sets up a fullcalendar instance\n     * for the nodes specified in the parameter node.\n     *\n     * @param DOMElement|string node The node which shall have a full calendar.\n     *     This must either be a DOMElement or a string\n     *     containing a CSS selector.\n     */\n    static init(node, fullcalendar_options = null)\n    {\n        // Convert css selector to actual dom element\n        node = $(node)[0];\n\n        if (!node) {\n            //We need a CSS selector or a node!\n            return;\n        }\n\n        if (document.getElementById('external-events')) {\n            new Draggable(document.getElementById('external-events'), {\n                itemSelector: '.fc-event',\n                eventData (eventEl) {\n                    return {\n                        title: eventEl.dataset.eventTitle,\n                        duration: eventEl.dataset.eventDuration,\n                        course_id: eventEl.dataset.eventCourse,\n                        tooltip: eventEl.dataset.eventTooltip,\n                        studip_api_urls: {drop: eventEl.dataset.eventDropUrl},\n                        studip_view_urls: {edit: eventEl.dataset.eventDetailsUrl}\n                    };\n                }\n            });\n        }\n\n        var calendar = new Calendar(node, fullcalendar_options);\n        node.calendar = calendar;\n        calendar.render();\n\n        return calendar;\n    }\n\n    /**\n     * Converts semester events to the default fullcalendar event format.\n     * The begin and end date are converted to fit into the current week.\n     */\n    static convertSemesterEvents(event_data)\n    {\n        if (!event_data) {\n            return {};\n        }\n\n        var start = String(event_data.start).split('T');\n        var end = String(event_data.end).split('T');\n\n        //start and end must be transformed to the current week.\n        //Therefore, we need the ISO weekdays for begin and end.\n        var fake_start = new Date();\n        fake_start.setHours(12);\n        fake_start.setMinutes(0);\n        fake_start.setSeconds(0);\n        var fake_end = new Date();\n        fake_end.setHours(12);\n        fake_end.setMinutes(0);\n        fake_end.setSeconds(0);\n\n        //Calculcate the week day of the current week for the event\n        //from the current day and convert sunday to ISO format\n        var start_day_diff = fake_start.getDay() || 7;\n        var end_day_diff = fake_end.getDay() || 7;\n\n        start_day_diff = start_day_diff - event_data.studip_weekday_begin;\n        end_day_diff = end_day_diff - event_data.studip_weekday_end;\n\n        fake_start = new Date(\n            fake_start.getTime() - start_day_diff * 24 * 60 * 60 * 1000\n        );\n        fake_end = new Date(\n            fake_end.getTime() - end_day_diff * 24 * 60 * 60 * 1000\n        );\n\n        //Output the modified begin and end date in the correct ISO format:\n        event_data.start = [\n            fake_start.getFullYear(),\n            + pad(fake_start.getMonth() + 1),\n            + pad(fake_start.getDate())\n        ].join('-') + 'T' + start[1];\n        event_data.end = [\n            fake_end.getFullYear(),\n            pad(fake_end.getMonth() + 1),\n            pad(fake_end.getDate())\n        ].join('-') + 'T' + end[1];\n\n        return event_data;\n    }\n\n\n    static createSemesterCalendarFromNode(node, additional_config = {})\n    {\n        if (!node) {\n            //Ain't no fullcalendar when the node's gone!\n            return;\n        }\n\n        var config = $.extend(\n            {},\n            $(node).data('config') || {},\n            additional_config\n        );\n\n        if (Array.isArray(config.eventSources)) {\n            config.eventSources = config.eventSources.map((s) => {\n                if (s.hasOwnProperty('url')) {\n                    return s;\n                }\n\n                return $.extend(\n                    {eventDataTransform: STUDIP.Fullcalendar.convertSemesterEvents},\n                    s\n                );\n            });\n        }\n\n        /* config = $.extend(\n            {\n                defaultView: 'dayGridWeek',\n                columnHeaderFormat: {hour: '2-digit', minute: '2-digit'},\n                header: {\n                    left: '',\n                    center: '',\n                    right: ''\n                }\n            },\n            additional_config || {}\n        ); */\n\n        return this.createFromNode(node, config);\n    }\n\n\n    static defaultResizeEventHandler(info)\n    {\n        if (!info.event.durationEditable || !info.view.viewSpec.options.editable) {\n            //Read-only events cannot be resized!\n            info.revert();\n            return;\n        }\n\n        if (info.event.extendedProps.studip_api_urls.resize) {\n            $.post({\n                url: info.event.extendedProps.studip_api_urls.resize,\n                async: false,\n                data: {\n                    begin: this.toRFC3339String(info.event.start),\n                    end: this.toRFC3339String(info.event.end)\n                }\n            }).fail(info.revert);\n        }\n    }\n\n    static downloadPDF(format = 'landscape', withWeekend = false)\n    {\n        $('*[data-fullcalendar=\"1\"]').each(function () {\n            if (this.calendar != undefined) {\n                $(this).addClass('print-view').toggleClass('without-weekend', !withWeekend);\n\n                var title = $(this).data('title');\n                let print_title = $('<h1>').text(title).prependTo(this);\n\n                window.scrollTo(0, 0);\n\n                html2canvas(this).then(canvas => {\n                    var imgData = canvas.toDataURL('image/jpeg');\n                    var pdf = new jsPDF({\n                        orientation: format === 'landscape' ? 'landscape' : 'portrait'\n                    });\n                    if (format === 'landscape') {\n                        pdf.addImage(imgData, 'JPEG', 20, 20, 250, 250, 'i1', 'NONE', 0);\n                    } else {\n                        pdf.addImage(imgData, 'JPEG', 25, 20, 160, 190, 'i1', 'NONE', 0);\n                    }\n                    pdf.save(title + '.pdf');\n                });\n\n                print_title.remove();\n                $(this).removeClass('print-view without-weekend');\n            }\n        });\n    }\n\n    static toRFC3339String(date)\n    {\n        var timezone_offset_min = date.getTimezoneOffset();\n        var offset_hrs = parseInt(Math.abs(timezone_offset_min / 60), 10);\n        var offset_min = Math.abs(timezone_offset_min%60);\n        var timezone_standard;\n\n        offset_hrs = pad(offset_hrs);\n        offset_min = pad(offset_min);\n\n        // Add an opposite sign to the offset\n        // If offset is 0, it means timezone is UTC\n        if (timezone_offset_min < 0) {\n            timezone_standard = `+${offset_hrs}:${offset_min}`;\n        } else if (timezone_offset_min > 0) {\n            timezone_standard = `-${offset_hrs}:${offset_min}`;\n        } else {\n            timezone_standard = '+00:00';\n        }\n\n        var current_date  = pad(date.getDate());\n        var current_month = pad(date.getMonth() + 1);\n        var current_year  = date.getFullYear();\n        var current_hrs   = pad(date.getHours());\n        var current_mins  = pad(date.getMinutes());\n        var current_secs  = pad(date.getSeconds());\n        var current_datetime;\n\n        // Current datetime\n        // String such as 2016-07-16T19:20:30\n        current_datetime = `${current_year}-${current_month}-${current_date}T${current_hrs}:${current_mins}:${current_secs}`;\n\n        return current_datetime + timezone_standard;\n    }\n\n    static defaultDropEventHandler(info)\n    {\n        // The logic from fullcalendar is inversed here:\n        // If the calendar isn't editable, the event isn't either.\n        if (!info.event.startEditable || !info.view.viewSpec.options.editable) {\n            //Read-only events cannot be dragged and dropped!\n            info.revert();\n            return;\n        }\n\n        var drop_resource_id = info.newResource ? info.newResource.id : info.event.extendedProps.studip_range_id;\n\n        if (info.event.extendedProps.studip_api_urls.move) {\n            if (info.event.allDay) {\n                $.post({\n                    async: false,\n                    url: info.event.extendedProps.studip_api_urls.move,\n                    data: {\n                        resource_id: drop_resource_id,\n                        begin: this.toRFC3339String(info.event.start.setHours(0,0,0)),\n                        end: this.toRFC3339String(info.event.start.setHours(23,59,59))\n                    }\n                }).fail(info.revert);\n            } else if (info.event.end === null) {\n                var real_end = new Date();\n                real_end.setTime(info.event.start.getTime());\n                real_end.setHours(info.event.start.getHours()+2);\n                $.post({\n                    async: false,\n                    url: info.event.extendedProps.studip_api_urls.move,\n                    data: {\n                        resource_id: drop_resource_id,\n                        begin: this.toRFC3339String(info.event.start),\n                        end: this.toRFC3339String(real_end)\n                    }\n                }).fail(info.revert);\n            } else {\n                $.post({\n                    async: false,\n                    url: info.event.extendedProps.studip_api_urls.move,\n                    data: {\n                        resource_id: drop_resource_id,\n                        begin: this.toRFC3339String(info.event.start),\n                        end: this.toRFC3339String(info.event.end)\n                    }\n                }).fail(info.revert);\n            }\n        }\n    }\n\n    static institutePlanDropEventHandler(info)\n    {\n        //The logic from fullcalendar is inversed here:\n        if (info.newResource) {\n            $.post({\n                async: false,\n                url: info.event.extendedProps.studip_api_urls.move,\n                data: {\n                    cycle_id: info.event.id,\n                    resource_id: info.newResource.id,\n                    begin: this.toRFC3339String(info.event.start),\n                    end: this.toRFC3339String(info.event.end)\n                }\n            }).fail(info.revert);\n        } else {\n            //If the calendar isn't editable, the event isn't either.\n            if (!info.event.startEditable || !info.view.viewSpec.options.editable) {\n                //Read-only events cannot be dragged and dropped!\n                info.revert();\n                return;\n            }\n\n            $.post({\n                async: false,\n                url: info.event.extendedProps.studip_api_urls.move,\n                data: {\n                    cycle_id: info.event.id,\n                    begin: this.toRFC3339String(info.event.start),\n                    end: this.toRFC3339String(info.event.end)\n                }\n            }).fail(info.revert);\n        }\n    }\n\n    static institutePlanExternalDropEventHandler(info)\n    {\n        var resourceIds = info.event.getResources().map(resource => resource.id);\n\n        $.post({\n            async: false,\n            url: info.event.extendedProps.studip_api_urls.drop,\n            data: {\n                course_id: info.event.extendedProps.course_id,\n                begin: this.toRFC3339String(info.event.start),\n                end: this.toRFC3339String(info.event.end),\n                resource_id: resourceIds[0]\n            }\n        }).done(data => {\n            if (data) {\n                info.view.context.calendar.addEvent(JSON.parse(data));\n                info.event.remove();\n            }\n        });\n    }\n\n    static createFromNode(node, additional_config = {})\n    {\n        if (!node) {\n            //No node? No fullcalendar!\n            return;\n        }\n\n        var config = $(node).data('config');\n\n        //Make sure the default values are set, if they are not found\n        //in the additional_config object:\n        config = $.extend({\n            plugins: [ interactionPlugin, dayGridPlugin, timeGridPlugin, resourceCommonPlugin, resourceTimeGridPlugin, resourceTimelinePlugin ],\n            schedulerLicenseKey: 'GPL-My-Project-Is-Open-Source',\n            defaultView: 'timeGridWeek',\n            header: {\n                left: 'dayGridMonth,timeGridWeek,timeGridDay'\n            },\n            minTime: '08:00:00',\n            maxTime: '20:00:00',\n            height: 'auto',\n            contentHeight: 'auto',\n            firstDay: 1,\n            weekNumberCalculation: 'ISO',\n            locales: [enLocale, deLocale ],\n            locale:  String.locale === 'de-DE' ? 'de' : 'en-gb',\n            timeFormat: 'H:mm',\n            nowIndicator: true,\n            timeZone: 'local',\n            studip_functions: [],\n            resourceAreaWidth: '20%',\n            select (selectionInfo) {\n                if (!selectionInfo.view.viewSpec.options.editable || !selectionInfo.view.viewSpec.options.studip_urls) {\n                    //The calendar isn't editable.\n                    return;\n                }\n                if (selectionInfo.view.viewSpec.options.studip_urls.add) {\n                    if (selectionInfo.resource) {\n                        STUDIP.Dialog.fromURL( selectionInfo.view.viewSpec.options.studip_urls.add, {\n                            data: {\n                                begin: selectionInfo.start.getTime()/1000,\n                                end: selectionInfo.end.getTime()/1000,\n                                ressource_id: selectionInfo.resource.id\n                            }\n                        });\n                    } else {\n                        STUDIP.Dialog.fromURL(selectionInfo.view.viewSpec.options.studip_urls.add, {\n                            data: {\n                                begin: selectionInfo.start.getTime()/1000,\n                                end: selectionInfo.end.getTime()/1000\n                            }\n                        });\n                    }\n                }\n            },\n            eventClick (eventClickInfo) {\n                var event = eventClickInfo.event;\n                var extended_props = event.extendedProps;\n\n                if ($(eventClickInfo.jsEvent.target).hasClass('event-colorpicker')) {\n                    STUDIP.Dialog.fromURL(\n                        STUDIP.URLHelper.getURL('dispatch.php/admin/courseplanning/pick_color/' + extended_props.metadate_id + '/' + config.actionCalled),\n                        {'size': '400x400'}\n                    );\n                    return false;\n                }\n\n                if (extended_props.studip_view_urls === undefined) {\n                    return;\n                }\n                if (!event.startEditable && extended_props.studip_view_urls.show) {\n                    STUDIP.Dialog.fromURL(\n                        STUDIP.URLHelper.getURL(extended_props.studip_view_urls.show)\n                    );\n                } else if (event.startEditable && extended_props.studip_view_urls.edit) {\n                    STUDIP.Dialog.fromURL(\n                        STUDIP.URLHelper.getURL(extended_props.studip_view_urls.edit)\n                    );\n                }\n                return false;\n            },\n            eventResize (info) {\n                // The logic from fullcalendar is inversed here:\n                // If the calendar isn't editable, the event isn't either.\n                if (info.view.viewSpec.options.studip_functions.resize_event) {\n                    info.view.viewSpec.options.studip_functions.resize_event(info);\n                } else {\n                    STUDIP.Fullcalendar.defaultResizeEventHandler(info);\n                }\n                info.event.source.refetch();\n            },\n            eventDrop (info) {\n                if ($(info.view.context.calendar.el).hasClass('institute-plan')) {\n                    var start = info.event.start;\n                    var cal_start = info.view.activeStart;\n                    if ((start.getHours() - cal_start.getHours()) % 2 === 1) {\n                        info.event.moveDates('-01:00');\n                    }\n                    STUDIP.Fullcalendar.institutePlanDropEventHandler(info);\n                } else {\n                    if (info.view.viewSpec.options.studip_functions.drop_event) {\n                        info.view.viewSpec.options.studip_functions.drop_event(info);\n                    } else {\n                        STUDIP.Fullcalendar.defaultDropEventHandler(info);\n                    }\n                    info.event.source.refetch();\n                }\n            },\n            eventRender (info) {\n                var event = info.event;\n                var eventElement = info.el;\n                var iconColor = event.textColor == '#000000' ? 'black' : 'white';\n\n                if ($(info.view.context.calendar.el).hasClass('institute-plan')) {\n                    $(eventElement).attr('title', event.extendedProps.tooltip);\n                    $(eventElement).find('.fc-title').html(\n                        $('<div>').css({\n                            width: 'calc(100% - 21px)',\n                            height: '100%',\n                            wordBreak: 'break-word'\n                        }).text(eventElement.text)\n                    );\n                    $(eventElement).find('.fc-title').append(\n                        $('<button class=\"event-colorpicker\">').addClass(iconColor)\n                    );\n                } else {\n                    $(eventElement).attr('title', event.title);\n                }\n\n                if (event.extendedProps.icon) {\n                    $(eventElement).find('.fc-title').prepend(\n                        $('<img>').attr('src', `${STUDIP.ASSETS_URL}images/icons/${iconColor}/${event.extendedProps.icon}.svg`)\n                            .css({\n                                verticalAlign: 'text-bottom',\n                                marginRight: '3px',\n                                width: 14,\n                                height: 14\n                            })\n                    );\n                }\n            },\n            loading (isLoading) {\n                if (isLoading) {\n                    if (!$('#loading-spinner').length) {\n                        jQuery('#layout_content').append(\n                            $('<div id=\"loading-spinner\" style=\"position: absolute; top: calc(50% - 55px); left: calc(50% + 135px); z-index: 9001;\">').html(\n                                $('<img>').attr('src', STUDIP.ASSETS_URL + 'images/ajax-indicator-black.svg')\n                                    .css({\n                                        width: 64,\n                                        height: 64\n                                    })\n                            )\n                        );\n                    }\n                } else {\n                    $('#loading-spinner').remove();\n                    this.updateSize();\n                }\n            },\n            datesRender (info) {\n                var activeRange = info.view.props.dateProfile.activeRange;\n                var start = activeRange.start;\n                var end = activeRange.end;\n\n                if ($(info.el).hasClass('institute-plan')) {\n                    $('.fc-slats tr:odd .fc-widget-content:not(.fc-axis)').remove();\n                }\n\n                if ($('.booking-plan-header').length) {\n                    end.setDate(end.getDate()-1);\n                    var sem_start = $('.booking-plan-header').data('semester-begin');\n                    var sem_end = $('.booking-plan-header').data('semester-end');\n\n                    if (start.getTime() / 1000 < sem_start || start.getTime() / 1000 > sem_end) {\n                        sem_start = null;\n                        sem_end = null;\n                    } else {\n                        var sem_week = Math.floor((start.getTime() / 1000 - sem_start) / (7 * 24 * 60 * 60)) + 1;\n                        $('#booking-plan-header-semweek').text(sem_week);\n                    }\n\n                    $('#booking-plan-header-calweek').text(start.getWeekNumber());\n                    $('#booking-plan-header-calbegin').text(start.toLocaleDateString('de-DE', {weekday: 'short'}) + ' ' + start.toLocaleDateString('de-DE'));\n                    $('#booking-plan-header-calend').text(end.toLocaleDateString('de-DE', {weekday: 'short'}) + ' ' + end.toLocaleDateString('de-DE'));\n\n                    if (!sem_start || !sem_end) {\n                        STUDIP.Resources.updateBookingPlanSemesterByView(activeRange);\n                    }\n                }\n            },\n            columnHeaderHtml (date) {\n                if ($(\"*[data-fullcalendar='1']\").hasClass('institute-plan')) {\n                    return '<a href=\"' + STUDIP.URLHelper.getURL('dispatch.php/admin/courseplanning/weekday/' + date.getDay()) + '\">' + date.toLocaleDateString('de-DE', config.columnHeaderFormat) + '</a>';\n                } else {\n                    return date.toLocaleDateString('de-DE', config.columnHeaderFormat);\n                }\n            },\n            resourceRender (renderInfo) {\n                if ($(renderInfo.view.context.calendar.el).hasClass('room-group-booking-plan')) {\n                    var action = $(renderInfo.view.context.calendar.el).hasClass('semester-plan') ? 'semester' : 'booking';\n                    var url = STUDIP.URLHelper.getURL(`dispatch.php/resources/room_planning/${action}_plan/${renderInfo.resource.id}`);\n\n                    $(renderInfo.el).find('.fc-cell-text').html(\n                        $('<a>').attr('href', url).text(renderInfo.el.innerText).append(\n                            $('<img>').attr('src', STUDIP.ASSETS_URL + 'images/icons/blue/link-intern.svg')\n                                .addClass('text-bottom')\n                                .css({\n                                    width: 16,\n                                    height: 16,\n                                    margin: '0px 5px'\n                                })\n                        )\n                    );\n                } else if ($(\"*[data-fullcalendar='1']\").hasClass('institute-plan') && renderInfo.resource.id > 0) {\n                    var icon = '<img class=\"text-bottom icon-role-clickable icon-shape-edit\" width=\"16\" height=\"16\" src=\"' + STUDIP.URLHelper.getURL('assets/images/icons/blue/edit.svg') + '\" alt=\"edit\">';\n                    $(renderInfo.el).append(\n                        '<a href=\"'\n                        + STUDIP.URLHelper.getURL('dispatch.php/admin/courseplanning/rename_column/'\n                        + renderInfo.resource.id\n                        +'/'\n                        + renderInfo.view.activeStart.getDay())\n                        + '\" data-dialog=\"size=auto\"> '\n                        + icon\n                        + '</a>'\n                    );\n                }\n            },\n            drop (dropInfo) {\n                $(dropInfo.draggedEl).remove();\n            },\n            eventReceive (info) {\n                if ($(info.view.context.calendar.el).hasClass('institute-plan')) {\n                    STUDIP.Fullcalendar.institutePlanExternalDropEventHandler(info);\n                }\n            }\n        }, config);\n\n        config = $.extend({}, config, additional_config);\n\n        return this.init(node, config);\n    }\n}\n\nexport default Fullcalendar;\n","import '@fullcalendar/core/main.css';\nimport '@fullcalendar/daygrid/main.css';\nimport '@fullcalendar/timegrid/main.css';\nimport '@fullcalendar/timeline/main.css';\nimport '@fullcalendar/resource-timeline/main.css';\n\nimport \"../../stylesheets/fullcalendar.scss\";\n\nimport Fullcalendar from '../lib/fullcalendar.js';\n\nSTUDIP.Fullcalendar = Fullcalendar;\n"],"sourceRoot":""}