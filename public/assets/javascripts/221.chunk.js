(self.webpackChunk_studip_core=self.webpackChunk_studip_core||[]).push([[221,900,758],{9221:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return s}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"scroll",rawName:"v-scroll"}],staticClass:"scrollable_area blubber_thread_widget"},[a("transition-group",{attrs:{name:"blubberthreadwidget-list",tag:"ol"}},[e._l(e.sortedThreads,(function(t){return a("li",{key:t.thread_id,class:(e.active_thread===t.thread_id?"active":"")+(t.unseen_comments>0?" unseen":""),attrs:{"data-thread_id":t.thread_id,"data-unseen_comments":t.unseen_comments},on:{click:function(t){return t.preventDefault(),e.changeActiveThread(t)}}},[a("a",{attrs:{href:e.link(t.thread_id)}},[a("div",{staticClass:"avatar",style:{backgroundImage:"url("+t.avatar+")"}}),e._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),a("studip-date-time",{attrs:{timestamp:t.timestamp,relative:!0}})],1)])])})),e._v(" "),e.display_more_down?a("li",{key:"more",staticClass:"more"},[a("studip-asset-img",{attrs:{file:"ajax-indicator-black.svg",width:"20"}})],1):e._e()],2)],1)};n._withStripped=!0;var r={name:"blubber-thread-widget",props:["threads","active_thread","more_down"],data:function(){return{display_more_down:this.more_down,already_loading_down:0}},methods:{changeActiveThread:function(e){var t=$(e.target).closest("li");t.hasClass("active")||(t.siblings(".active").removeClass("active"),t.addClass("active"),this.$root.changeActiveThread(t.data("thread_id")))},link:function(e){return STUDIP.URLHelper.getURL("dispatch.php/blubber/index/".concat(e))},addThread:function(e){-1===this.threads.map((function(e){return e.thread_id})).indexOf(e.thread_id)&&this.threads.push(e)}},directives:{scroll:{inserted:function(e){var t=e.__vue__;$(e).parent().on("scroll",(function(a){var n=$(e).parent().scrollTop(),r=$(e).height();if($(e).toggleClass("scrolled",n>0),!(!t.display_more_down||n<=r-1e3||t.already_loading_down)){t.already_loading_down=!0;var i=t.threads.reduce((function(e,t){return"global"===t.thread_id?e:null===e?t.timestamp:Math.min(e,t.timestamp)}),null);STUDIP.api.GET("blubber/threads",{data:{modifier:"olderthan",timestamp:i,limit:50}}).done((function(e){e.threads.forEach((function(e){return t.addThread(e)})),t.display_more_down=e.more_down})).always((function(){t.already_loading_down=!1}))}}))}}},mounted:function(){},computed:{sortedThreads:function(){return this.threads.sort((function(e,t){return t.timestamp-e.timestamp}))}}},i=(0,a(1900).Z)(r,n,[],!1,null,null,null);i.options.__file="resources/vue/components/BlubberThreadWidget.vue";var s=i.exports},1900:function(e,t,a){"use strict";function n(e,t,a,n,r,i,s,o){var d,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=a,l._compiled=!0),n&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=d):r&&(d=o?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(e,t){return d.call(t),c(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:l}}a.d(t,{Z:function(){return n}})}}]);
//# sourceMappingURL=221.chunk.js.map